import{p as io,aI as yo,n as ko,m as bo,a as xo,b as Bo,g as Co,c as wo,u as Ro,f as pt,E as Ao}from"./index-DdiE6swd.js";const K=8,eo=5,Hi=K-1,Gi=eo-1,q=K*eo,Ot=12,Mo=32768;var m=(t=>(t[t.Red=3]="Red",t[t.Orange=8]="Orange",t[t.Mango=15]="Mango",t[t.Yellow=4]="Yellow",t[t.Lime=9]="Lime",t[t.Green=2]="Green",t[t.Surf=10]="Surf",t[t.Aqua=5]="Aqua",t[t.Sky=11]="Sky",t[t.Blue=1]="Blue",t[t.Purple=12]="Purple",t[t.Magenta=6]="Magenta",t[t.Pink=13]="Pink",t[t.Peach=14]="Peach",t[t.White=7]="White",t))(m||{});const Lo=[3,8,15,4,9,2,10,5,11,1,12,6,13,14,7];var r=(t=>(t[t.Interface=0]="Interface",t[t.Audio=1]="Audio",t[t.Control=2]="Control",t[t.Analysis=3]="Analysis",t[t.Effect=4]="Effect",t))(r||{}),y=(t=>(t[t.Blank=0]="Blank",t[t.Button=1]="Button",t[t.Audio=2]="Audio",t[t.Headphones=3]="Headphones",t[t.Midi=4]="Midi",t[t.CPort=5]="CPort",t[t.Stomp=6]="Stomp",t))(y||{}),V=(t=>(t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Side=2]="Side",t))(V||{}),ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Io(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gt={exports:{}},ct,Et;function Po(){if(Et)return ct;Et=1;var t=1e3,o=t*60,i=o*60,e=i*24,n=e*7,s=e*365.25;ct=function(a,p){p=p||{};var u=typeof a;if(u==="string"&&a.length>0)return l(a);if(u==="number"&&isFinite(a))return p.long?d(a):_(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(p){var u=parseFloat(p[1]),h=(p[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*n;case"days":case"day":case"d":return u*e;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*o;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function _(a){var p=Math.abs(a);return p>=e?Math.round(a/e)+"d":p>=i?Math.round(a/i)+"h":p>=o?Math.round(a/o)+"m":p>=t?Math.round(a/t)+"s":a+"ms"}function d(a){var p=Math.abs(a);return p>=e?c(a,p,e,"day"):p>=i?c(a,p,i,"hour"):p>=o?c(a,p,o,"minute"):p>=t?c(a,p,t,"second"):a+" ms"}function c(a,p,u,h){var k=p>=u*1.5;return Math.round(a/u)+" "+h+(k?"s":"")}return ct}function Oo(t){i.debug=i,i.default=i,i.coerce=d,i.disable=l,i.enable=n,i.enabled=_,i.humanize=Po(),i.destroy=c,Object.keys(t).forEach(a=>{i[a]=t[a]}),i.names=[],i.skips=[],i.formatters={};function o(a){let p=0;for(let u=0;u<a.length;u++)p=(p<<5)-p+a.charCodeAt(u),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=o;function i(a){let p,u=null,h,k;function g(...b){if(!g.enabled)return;const B=g,L=Number(new Date),Q=L-(p||L);B.diff=Q,B.prev=p,B.curr=L,p=L,b[0]=i.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let N=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(f,M)=>{if(f==="%%")return"%";N++;const A=i.formatters[M];if(typeof A=="function"){const G=b[N];f=A.call(B,G),b.splice(N,1),N--}return f}),i.formatArgs.call(B,b),(B.log||i.log).apply(B,b)}return g.namespace=a,g.useColors=i.useColors(),g.color=i.selectColor(a),g.extend=e,g.destroy=i.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(h!==i.namespaces&&(h=i.namespaces,k=i.enabled(a)),k),set:b=>{u=b}}),typeof i.init=="function"&&i.init(g),g}function e(a,p){const u=i(this.namespace+(typeof p>"u"?":":p)+a);return u.log=this.log,u}function n(a){i.save(a),i.namespaces=a,i.names=[],i.skips=[];const p=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const u of p)u[0]==="-"?i.skips.push(u.slice(1)):i.names.push(u)}function s(a,p){let u=0,h=0,k=-1,g=0;for(;u<a.length;)if(h<p.length&&(p[h]===a[u]||p[h]==="*"))p[h]==="*"?(k=h,g=u,h++):(u++,h++);else if(k!==-1)h=k+1,g++,u=g;else return!1;for(;h<p.length&&p[h]==="*";)h++;return h===p.length}function l(){const a=[...i.names,...i.skips.map(p=>"-"+p)].join(",");return i.enable(""),a}function _(a){for(const p of i.skips)if(s(a,p))return!1;for(const p of i.names)if(s(a,p))return!0;return!1}function d(a){return a instanceof Error?a.stack||a.message:a}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var Eo=Oo;(function(t,o){var i={};o.formatArgs=n,o.save=s,o.load=l,o.useColors=e,o.storage=_(),o.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;c.splice(1,0,a,"color: inherit");let p=0,u=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(p++,h==="%c"&&(u=p))}),c.splice(u,0,a)}o.log=console.debug||console.log||(()=>{});function s(c){try{c?o.storage.setItem("debug",c):o.storage.removeItem("debug")}catch{}}function l(){let c;try{c=o.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=i.DEBUG),c}function _(){try{return localStorage}catch{}}t.exports=Eo(o);const{formatters:d}=t.exports;d.j=function(c){try{return JSON.stringify(c)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}})(gt,gt.exports);var So=gt.exports;const S=Io(So),P=[{id:0,name:"SV Filter",category:r.Audio,defaultBlocks:4,minBlocks:3,maxBlocks:6,params:2,cpu:3,blocks:{audio_in:{initial:!0,position:0},frequency:{initial:!0,param:!0,position:1},resonance:{initial:!0,param:!0,position:2},lowpass_out:{initial:!0,position:3},hipass_out:{position:4},bandpass_out:{position:5}},options:{lowpass_out:{slot:0,values:["on","off"]},hipass_out:{slot:1,values:["off","on"]},bandpass_out:{slot:2,values:["off","on"]},freq_change:{slot:3,values:["smooth","instant"]}},conditions:{lowpass_out:{type:"toggle",option:"lowpass_out"},hipass_out:{type:"toggle",option:"hipass_out"},bandpass_out:{type:"toggle",option:"bandpass_out"}}},{id:1,name:"Audio In",category:r.Interface,defaultBlocks:2,minBlocks:1,maxBlocks:2,params:0,cpu:.4,blocks:{output_L:{initial:!0,position:0},output_R:{initial:!0,position:1}},options:{channels:{slot:0,values:["stereo","left","right"]}},conditions:{output_L:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"},{type:"value",option:"channels",value:"left"}]},output_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"},{type:"value",option:"channels",value:"right"}]}}},{id:2,name:"Audio Out",category:r.Interface,defaultBlocks:2,minBlocks:1,maxBlocks:3,params:1,cpu:1.7,blocks:{input_L:{initial:!0,position:0},input_R:{initial:!0,position:1},gain:{param:!0,position:2}},options:{gain_control:{slot:0,values:["off","on"]},channels:{slot:1,values:["stereo","left","right"]}},conditions:{input_L:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"},{type:"value",option:"channels",value:"left"}]},input_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"},{type:"value",option:"channels",value:"right"}]},gain:{type:"toggle",option:"gain_control"}}},{id:3,name:"Aliaser",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:1,cpu:.7,blocks:{audio_in:{initial:!0,position:0},alias_amount:{initial:!0,param:!0,position:1},audio_out:{initial:!0,position:2}},options:{}},{id:4,name:"Sequencer",category:r.Control,defaultBlocks:6,minBlocks:3,maxBlocks:44,params:36,cpu:2,blocks:{step_1:{initial:!0,param:!0,position:0},step_2:{initial:!0,param:!0,position:1},step_3:{initial:!0,param:!0,position:2},step_4:{initial:!0,param:!0,position:3},step_5:{param:!0,position:4},step_6:{param:!0,position:5},step_7:{param:!0,position:6},step_8:{param:!0,position:7},step_9:{param:!0,position:8},step_10:{param:!0,position:9},step_11:{param:!0,position:10},step_12:{param:!0,position:11},step_13:{param:!0,position:12},step_14:{param:!0,position:13},step_15:{param:!0,position:14},step_16:{param:!0,position:15},step_17:{param:!0,position:16},step_18:{param:!0,position:17},step_19:{param:!0,position:18},step_20:{param:!0,position:19},step_21:{param:!0,position:20},step_22:{param:!0,position:21},step_23:{param:!0,position:22},step_24:{param:!0,position:23},step_25:{param:!0,position:24},step_26:{param:!0,position:25},step_27:{param:!0,position:26},step_28:{param:!0,position:27},step_29:{param:!0,position:28},step_30:{param:!0,position:29},step_31:{param:!0,position:30},step_32:{param:!0,position:31},gate_in:{initial:!0,param:!0,position:32},queue_start:{param:!0,position:33},out_track_1:{initial:!0,position:34,sort:44},out_track_2:{position:35,sort:45},out_track_3:{position:36,sort:46},out_track_4:{position:37,sort:47},out_track_5:{position:38,sort:48},out_track_6:{position:39,sort:49},out_track_7:{position:40,sort:50},out_track_8:{position:41,sort:51},key_input_note:{param:!0,position:42},key_input_gate:{param:!0,position:43}},options:{number_of_steps:{slot:0,values:{min:1,max:32}},num_of_tracks:{slot:1,values:{min:1,max:8}},restart_jack:{slot:2,values:["off","on"]},behavior:{slot:3,values:["loop","one_shot","cv_step"]},key_input:{slot:4,values:["off","selected","increment","active"]},number_of_pages:{slot:5,values:{min:1,max:8}}},conditions:{step_1:{type:"sequential",option:"number_of_steps",startPosition:0,nameTemplate:"step_{n}"},queue_start:{type:"toggle",option:"restart_jack"},key_input_note:{type:"multi",operator:"or",conditions:[{type:"value",option:"key_input",value:"selected"},{type:"value",option:"key_input",value:"increment"},{type:"value",option:"key_input",value:"active"}]},key_input_gate:{type:"multi",operator:"or",conditions:[{type:"value",option:"key_input",value:"selected"},{type:"value",option:"key_input",value:"increment"},{type:"value",option:"key_input",value:"active"}]},out_track_1:{type:"sequential",option:"num_of_tracks",startPosition:34,nameTemplate:"out_track_{n}"}}},{id:5,name:"LFO",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:5,params:4,cpu:.3,blocks:{cv_control:{initial:!0,param:!0,position:0},tap_control:{param:!0,position:1},swing_amount:{param:!0,position:2},phase_input:{param:!0,position:4},phase_reset:{param:!0,position:5},output:{initial:!0,position:3,sort:6}},options:{waveform:{slot:0,values:["square","sine","triangle","sawtooth","ramp","random"]},swing_control:{slot:1,values:["off","on"]},output:{slot:2,values:["0 to 1","-1 to 1"]},input:{slot:3,values:["cv","tap","linear_cv"]},phase_input:{slot:4,values:["off","on"]},phase_reset:{slot:5,values:["off","on"]}},conditions:{tap_control:{type:"value",option:"input",value:"tap"},swing_amount:{type:"toggle",option:"swing_control"},phase_input:{type:"toggle",option:"phase_input"},phase_reset:{type:"toggle",option:"phase_reset"}}},{id:6,name:"ADSR",category:r.Control,defaultBlocks:6,minBlocks:4,maxBlocks:10,params:9,cpu:.07,blocks:{cv_in:{initial:!0,param:!0,position:0},retrigger:{param:!0,position:1},delay:{param:!0,position:2},attack:{initial:!0,param:!0,position:3},hold_attack_decay:{param:!0,position:4},decay:{initial:!0,param:!0,position:5},sustain:{initial:!0,param:!0,position:6},hold_sustain_release:{param:!0,position:7},release:{initial:!0,param:!0,position:8},cv_out:{initial:!0,position:9}},options:{retrigger_input:{slot:0,values:["off","on"]},initial_delay:{slot:1,values:["off","on"]},hold_attack_decay:{slot:2,values:["off","on"]},str:{slot:3,values:["on","off"]},immediate_release:{slot:4,values:["on","off"]},hold_sustain_release:{slot:5,values:["off","on"]},time_scale:{slot:6,values:["exponent","linear"]}},conditions:{retrigger:{type:"toggle",option:"retrigger_input"},delay:{type:"toggle",option:"initial_delay"},hold_attack_decay:{type:"toggle",option:"hold_attack_decay"},sustain:{type:"toggle",option:"str"},hold_sustain_release:{type:"toggle",option:"hold_sustain_release"},release:{type:"toggle",option:"str"}}},{id:7,name:"VCA",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:5,params:1,cpu:.7,blocks:{audio_in_1:{initial:!0,position:0},audio_in_2:{position:1},level_control:{initial:!0,param:!0,position:2},audio_out_1:{initial:!0,position:3},audio_out_2:{position:4}},options:{channels:{slot:0,values:["1in->1out","stereo"]}},conditions:{audio_in_2:{type:"value",option:"channels",value:"stereo"},audio_out_2:{type:"value",option:"channels",value:"stereo"}}},{id:8,name:"Audio Multiply",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:0,cpu:.4,blocks:{audio_in_1:{initial:!0,position:0},audio_in_2:{initial:!0,position:1},audio_out:{initial:!0,position:2}},options:{}},{id:9,name:"Bit Crusher",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:1,cpu:1,blocks:{audio_in:{initial:!0,position:0},crushed_bits:{initial:!0,param:!0,position:1},audio_out:{initial:!0,position:2}},options:{fractions:{slot:0,values:["off","on"]}}},{id:10,name:"Sample and Hold",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:2,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0},trigger:{initial:!0,param:!0,position:1},cv_out:{initial:!0,position:2}},options:{"track & hold":{slot:0,values:["off","on"]}}},{id:11,name:"OD and Distortion",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:4,params:2,cpu:17,blocks:{audio_in:{initial:!0,position:0},input_gain:{initial:!0,param:!0,position:1},output_gain:{initial:!0,param:!0,position:3},audio_out:{initial:!0,position:2,sort:4}},options:{model:{slot:0,values:["plexi","germ","classic","pushed","edgy"]}}},{id:12,name:"Env Follower",category:r.Analysis,defaultBlocks:2,minBlocks:2,maxBlocks:4,params:2,cpu:5,blocks:{audio_in:{initial:!0,position:0},rise_time:{param:!0,position:1},fall_time:{param:!0,position:2},cv_out:{initial:!0,position:3}},options:{rise_fall_time:{slot:0,values:["off","on"]},output_scale:{slot:1,values:["log","linear"]}},conditions:{rise_time:{type:"toggle",option:"rise_fall_time"},fall_time:{type:"toggle",option:"rise_fall_time"}}},{id:13,name:"Delay Line",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:4,params:3,cpu:3,blocks:{audio_in:{initial:!0,position:0},delay_time:{initial:!0,param:!0,position:1},modulation_in:{param:!0,position:2},tap_tempo_in:{param:!0,position:3},audio_out:{initial:!0,position:4}},options:{max_time:{slot:0,values:["1s","2s","4s","8s","16s","100ms"]},tap_tempo_in:{slot:1,values:["no","yes"]},interpolation:{slot:2,values:["on","off"]},cv_input:{slot:3,values:["exponent","linear"]}},conditions:{delay_time:{type:"value",option:"tap_tempo_in",value:"no"},modulation_in:{type:"toggle",option:"tap_tempo_in"},tap_tempo_in:{type:"toggle",option:"tap_tempo_in"}}},{id:14,name:"Oscillator",category:r.Audio,defaultBlocks:2,minBlocks:2,maxBlocks:4,params:2,cpu:10,blocks:{frequency:{initial:!0,param:!0,position:0},fm_input:{position:1},duty_cycle:{param:!0,position:2},audio_out:{initial:!0,position:3}},options:{waveform:{slot:0,values:["sine","square","triangle","sawtooth"]},fm_in:{slot:1,values:["off","on"]},duty_cycle:{slot:2,values:["off","on"]},upsampling:{slot:3,values:["none","2x"]}},conditions:{fm_input:{type:"toggle",option:"fm_in"},duty_cycle:{type:"toggle",option:"duty_cycle"}}},{id:15,name:"Pushbutton",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.02,blocks:{cv_out:{initial:!0,position:1}},options:{action:{slot:0,values:["momentary","latching"]},normally:{slot:1,values:["zero","one"]}}},{id:16,name:"Keyboard",category:r.Interface,defaultBlocks:4,minBlocks:4,maxBlocks:43,params:40,cpu:.1,blocks:{note_1:{initial:!0,param:!0,position:0},note_2:{param:!0,position:1},note_3:{param:!0,position:2},note_4:{param:!0,position:3},note_5:{param:!0,position:4},note_6:{param:!0,position:5},note_7:{param:!0,position:6},note_8:{param:!0,position:7},note_9:{param:!0,position:8},note_10:{param:!0,position:9},note_11:{param:!0,position:10},note_12:{param:!0,position:11},note_13:{param:!0,position:12},note_14:{param:!0,position:13},note_15:{param:!0,position:14},note_16:{param:!0,position:15},note_17:{param:!0,position:16},note_18:{param:!0,position:17},note_19:{param:!0,position:18},note_20:{param:!0,position:19},note_21:{param:!0,position:20},note_22:{param:!0,position:21},note_23:{param:!0,position:22},note_24:{param:!0,position:23},note_25:{param:!0,position:24},note_26:{param:!0,position:28},note_27:{param:!0,position:29},note_28:{param:!0,position:30},note_29:{param:!0,position:31},note_30:{param:!0,position:32},note_31:{param:!0,position:33},note_32:{param:!0,position:34},note_33:{param:!0,position:35},note_34:{param:!0,position:36},note_35:{param:!0,position:37},note_36:{param:!0,position:38},note_37:{param:!0,position:39},note_38:{param:!0,position:40},note_39:{param:!0,position:41},note_40:{param:!0,position:42},note_out:{initial:!0,position:25,sort:43},gate_out:{initial:!0,position:26,sort:44},trigger_out:{initial:!0,position:27,sort:45}},options:{num_of_notes:{slot:0,values:{min:1,max:40}}},conditions:{note_1:{type:"sequential",option:"num_of_notes",startPosition:0,nameTemplate:"note_{n}"}}},{id:17,name:"CV Invert",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:1,cpu:.02,blocks:{cv_in:{initial:!0,param:!0,position:0},cv_out:{initial:!0,position:1}},options:{}},{id:18,name:"Steps",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:2,cpu:.7,blocks:{cv_in:{initial:!0,param:!0,position:0},quant_steps:{initial:!0,param:!0,position:1},cv_out:{initial:!0,position:2}},options:{}},{id:19,name:"Slew Limiter",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:4,params:2,cpu:.2,blocks:{cv_in:{initial:!0,param:!0,position:0},slew_rate:{initial:!0,param:!0,position:1},rising_lag:{param:!0,position:2},falling_lag:{param:!0,position:3},cv_out:{initial:!0,position:4}},options:{control:{slot:0,values:["linked","separate"]}},conditions:{slew_rate:{type:"value",option:"control",value:"linked"},rising_lag:{type:"value",option:"control",value:"separate"},falling_lag:{type:"value",option:"control",value:"separate"}}},{id:20,name:"Midi Notes In",category:r.Interface,in:!0,defaultBlocks:2,minBlocks:2,maxBlocks:32,params:0,cpu:.3,blocks:{note_out_1:{initial:!0,position:0},gate_out_1:{initial:!0,position:1},velocity_out_1:{position:2},trigger_out_1:{position:3},note_out_2:{position:4},gate_out_2:{position:5},velocity_out_2:{position:6},trigger_out_2:{position:7},note_out_3:{position:8},gate_out_3:{position:9},velocity_out_3:{position:10},trigger_out_3:{position:11},note_out_4:{position:12},gate_out_4:{position:13},velocity_out_4:{position:14},trigger_out_4:{position:15},note_out_5:{position:16},gate_out_5:{position:17},velocity_out_5:{position:18},trigger_out_5:{position:19},note_out_6:{position:20},gate_out_6:{position:21},velocity_out_6:{position:22},trigger_out_6:{position:23},note_out_7:{position:24},gate_out_7:{position:25},velocity_out_7:{position:26},trigger_out_7:{position:27},note_out_8:{position:28},gate_out_8:{position:29},velocity_out_8:{position:30},trigger_out_8:{position:31}},options:{midi_channel:{slot:0,values:{min:1,max:16}},num_of_outs:{slot:1,values:{min:1,max:8}},priority:{slot:2,values:["newest","oldest","highest","lowest","RoundRobin"]},greedy:{slot:3,values:["no","yes"]},velocity_out:{slot:4,values:["off","on"]},low_note:{slot:5,values:{min:0,max:127}},high_note:{slot:6,values:{min:127,max:0}},trigger_pulse:{slot:7,values:["off","on"]}},conditions:{note_out_1:{type:"sequential",option:"num_of_outs",startPosition:0,nameTemplate:"note_out_{n}",blockCount:4},gate_out_1:{type:"sequential",option:"num_of_outs",startPosition:1,nameTemplate:"gate_out_{n}",blockCount:4},velocity_out_1:{type:"sequential",option:"num_of_outs",startPosition:2,nameTemplate:"velocity_out_{n}",blockCount:4,condition:{type:"toggle",option:"velocity_out"}},trigger_out_1:{type:"sequential",option:"num_of_outs",startPosition:3,nameTemplate:"trigger_out_{n}",blockCount:4,condition:{type:"toggle",option:"trigger_pulse"}}}},{id:21,name:"Midi CC In",category:r.Interface,in:!0,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cc_out:{initial:!0,position:0}},options:{midi_channel:{slot:0,values:{min:1,max:16}},controller:{slot:1,values:{min:0,max:127}},output_range:{slot:2,values:["0 to 1","-1 to 1"]}}},{id:22,name:"Multiplier",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:9,params:2,cpu:.2,blocks:{cv_in_1:{initial:!0,param:!0,position:0},cv_in_2:{initial:!0,param:!0,position:1},cv_in_3:{param:!0,position:2},cv_in_4:{param:!0,position:3},cv_in_5:{param:!0,position:4},cv_in_6:{param:!0,position:5},cv_in_7:{param:!0,position:6},cv_in_8:{param:!0,position:7},cv_out:{initial:!0,position:8}},options:{num_inputs:{slot:0,values:{min:2,max:8}}},conditions:{cv_in_3:{type:"sequential",option:"num_inputs",startPosition:2,nameTemplate:"cv_in_{n}"}}},{id:23,name:"Compressor",category:r.Effect,defaultBlocks:3,minBlocks:3,maxBlocks:9,params:4,cpu:3,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},threshold:{initial:!0,param:!0,position:2},attack:{param:!0,position:3},release:{param:!0,position:4},ratio:{param:!0,position:5},sidechain_in:{position:8},audio_out_L:{initial:!0,position:6,sort:9},audio_out_R:{position:7,sort:10}},options:{attack_ctrl:{slot:0,values:["off","on"]},release_ctrl:{slot:1,values:["off","on"]},ratio_ctrl:{slot:2,values:["off","on"]},channels:{slot:3,values:["1in->1out","stereo"]},sidechain:{slot:4,values:["internal","external"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},attack:{type:"toggle",option:"attack_ctrl"},release:{type:"toggle",option:"release_ctrl"},ratio:{type:"toggle",option:"ratio_ctrl"},sidechain_in:{type:"value",option:"sidechain",value:"external"},audio_out_R:{type:"value",option:"channels",value:"stereo"}}},{id:24,name:"Multi Filter",category:r.Audio,defaultBlocks:4,minBlocks:4,maxBlocks:5,params:3,cpu:.8,blocks:{audio_in:{initial:!0,position:0},gain:{param:!0,position:1},frequency:{initial:!0,param:!0,position:2},q:{initial:!0,param:!0,position:3},audio_out:{initial:!0,position:4}},options:{filter_shape:{slot:0,values:["lowpass","hi_shelf","bell","highpass","low_shelf","bandpass"]}},conditions:{gain:{type:"multi",operator:"or",conditions:[{type:"value",option:"filter_shape",value:"bell"},{type:"value",option:"filter_shape",value:"hi_shelf"},{type:"value",option:"filter_shape",value:"low_shelf"}]}}},{id:25,name:"Plate Reverb",category:r.Effect,defaultBlocks:8,minBlocks:8,maxBlocks:8,params:4,cpu:22,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{initial:!0,position:1},decay_time:{initial:!0,param:!0,position:3},low_eq:{initial:!0,param:!0,position:6},high_eq:{initial:!0,param:!0,position:7},mix:{initial:!0,param:!0,position:2,sort:8},audio_out_L:{initial:!0,position:4,sort:9},audio_out_R:{initial:!0,position:5,sort:10}},options:{}},{id:26,name:"Buffer Delay",category:r.Audio,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:0,cpu:.2,blocks:{audio_in:{initial:!0,position:0},audio_out:{initial:!0,position:1}},options:{buffer_length:{slot:0,values:{min:0,max:16}}}},{id:27,name:"All Pass Filter",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:1,cpu:5,blocks:{audio_in:{initial:!0,position:0},filter_gain:{initial:!0,param:!0,position:1},audio_out:{initial:!0,position:2}},options:{num_of_poles:{slot:0,values:{min:1,max:8}}}},{id:28,name:"Quantizer",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:4,params:3,cpu:1,blocks:{cv_in:{initial:!0,param:!0,position:0},key:{param:!0,position:2},scale:{param:!0,position:3},cv_out:{initial:!0,position:1,sort:4}},options:{key_scale_jacks:{slot:0,values:["no","yes"]},scales:{slot:1,values:["basic","extended"]}},conditions:{key:{type:"toggle",option:"key_scale_jacks"},scale:{type:"toggle",option:"key_scale_jacks"}}},{id:29,name:"Phaser",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:4,cpu:15,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:3},tap_tempo_in:{param:!0,position:7},control_in:{param:!0,position:8},resonance:{initial:!0,param:!0,position:4},width:{initial:!0,param:!0,position:9},mix:{initial:!0,param:!0,position:2,sort:10},audio_out_L:{initial:!0,position:5,sort:11},audio_out_R:{position:6,sort:12}},options:{channels:{slot:0,values:["1in->1out","1in->2out","2in->2out"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]},number_of_stages:{slot:2,values:[4,2,1,3,6,8]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"2in->2out"}]},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},control_in:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"2in->2out"}]}}},{id:30,name:"Looper",category:r.Audio,defaultBlocks:5,minBlocks:5,maxBlocks:10,params:6,cpu:3,blocks:{audio_in:{initial:!0,position:0},record:{initial:!0,param:!0,position:1},restart_playback:{initial:!0,param:!0,position:2},stop_play:{param:!0,position:9,sort:2.5},speed_pitch:{initial:!0,param:!0,position:3},start_position:{param:!0,position:4},loop_length:{param:!0,position:5},reverse_playback:{param:!0,position:7},reset:{param:!0,position:8,sort:10},audio_out:{initial:!0,position:6,sort:11}},options:{max_rec_time:{slot:0,values:["1s","2s","4s","8s","16s","32s"]},length_edit:{slot:1,values:["off","on"]},playback:{slot:2,values:["once","loop"]},length:{slot:3,values:["fixed","pre_speed"]},hear_while_rec:{slot:4,values:["no","yes"]},play_reverse:{slot:5,values:["no","yes"]},overdub:{slot:6,values:["no","yes"]},stop_play_button:{slot:7,values:["no","yes"]}},conditions:{stop_play:{type:"toggle",option:"stop_play_button"},start_position:{type:"toggle",option:"length_edit"},loop_length:{type:"toggle",option:"length_edit"},reverse_playback:{type:"toggle",option:"play_reverse"},reset:{type:"toggle",option:"overdub"}}},{id:31,name:"In Switch",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:18,params:17,cpu:.2,blocks:{cv_in_1:{initial:!0,param:!0,position:0},cv_in_2:{param:!0,position:1},cv_in_3:{param:!0,position:2},cv_in_4:{param:!0,position:3},cv_in_5:{param:!0,position:4},cv_in_6:{param:!0,position:5},cv_in_7:{param:!0,position:6},cv_in_8:{param:!0,position:7},cv_in_9:{param:!0,position:8},cv_in_10:{param:!0,position:9},cv_in_11:{param:!0,position:10},cv_in_12:{param:!0,position:11},cv_in_13:{param:!0,position:12},cv_in_14:{param:!0,position:13},cv_in_15:{param:!0,position:14},cv_in_16:{param:!0,position:15},in_select:{initial:!0,param:!0,position:16},cv_out:{initial:!0,position:17}},options:{num_inputs:{slot:0,values:{min:1,max:16}}},conditions:{cv_in_2:{type:"sequential",option:"num_inputs",startPosition:1,nameTemplate:"cv_in_{n}"}}},{id:32,name:"Out Switch",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:18,params:2,cpu:.2,blocks:{cv_in:{initial:!0,param:!0,position:0},out_select:{initial:!0,param:!0,position:1},cv_out_1:{initial:!0,position:2},cv_out_2:{position:3},cv_out_3:{position:4},cv_out_4:{position:5},cv_out_5:{position:6},cv_out_6:{position:7},cv_out_7:{position:8},cv_out_8:{position:9},cv_out_9:{position:10},cv_out_10:{position:11},cv_out_11:{position:12},cv_out_12:{position:13},cv_out_13:{position:14},cv_out_14:{position:15},cv_out_15:{position:16},cv_out_16:{position:17}},options:{num_outs:{slot:0,values:{min:1,max:16}}},conditions:{cv_out_2:{type:"sequential",option:"num_outs",startPosition:3,nameTemplate:"cv_out_{n}"}}},{id:33,name:"Audio In Switch",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:18,params:1,cpu:.8,blocks:{audio_in_1:{initial:!0,position:0},audio_in_2:{position:1},audio_in_3:{position:2},audio_in_4:{position:3},audio_in_5:{position:4},audio_in_6:{position:5},audio_in_7:{position:6},audio_in_8:{position:7},audio_in_9:{position:8},audio_in_10:{position:9},audio_in_11:{position:10},audio_in_12:{position:11},audio_in_13:{position:12},audio_in_14:{position:13},audio_in_15:{position:14},audio_in_16:{position:15},in_select:{initial:!0,param:!0,position:16},audio_out:{initial:!0,position:17}},options:{num_inputs:{slot:0,values:{min:1,max:16}},fades:{slot:1,values:["on","off"]}},conditions:{audio_in_2:{type:"sequential",option:"num_inputs",startPosition:1,nameTemplate:"audio_in_{n}"}}},{id:34,name:"Audio Out Switch",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:18,params:1,cpu:.7,blocks:{audio_in:{initial:!0,position:0},in_select:{initial:!0,param:!0,position:1},audio_out_1:{initial:!0,position:2},audio_out_2:{position:3},audio_out_3:{initial:!0,position:4},audio_out_4:{position:5},audio_out_5:{initial:!0,position:6},audio_out_6:{position:7},audio_out_7:{initial:!0,position:8},audio_out_8:{position:9},audio_out_9:{initial:!0,position:10},audio_out_10:{position:11},audio_out_11:{initial:!0,position:12},audio_out_12:{position:13},audio_out_13:{initial:!0,position:14},audio_out_14:{position:15},audio_out_15:{initial:!0,position:16},audio_out_16:{position:17}},options:{num_outs:{slot:0,values:{min:1,max:16}},fades:{slot:1,values:["on","off"]}},conditions:{audio_out_2:{type:"sequential",option:"num_outs",startPosition:3,nameTemplate:"audio_out_{n}"}}},{id:35,name:"Midi Pressure",category:r.Interface,in:!0,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.03,blocks:{channel_pressure:{initial:!0,position:0}},options:{midi_channel:{slot:0,values:{min:1,max:16}}}},{id:36,name:"Onset Detector",category:r.Analysis,defaultBlocks:2,minBlocks:2,maxBlocks:3,params:1,cpu:.7,blocks:{audio_in:{initial:!0,position:0},sensitivity:{param:!0,position:1},cv_out:{initial:!0,position:2}},options:{sensitivity:{slot:0,values:["off","on"]}},conditions:{sensitivity:{type:"toggle",option:"sensitivity"}}},{id:37,name:"Rhythm",category:r.Control,defaultBlocks:4,minBlocks:4,maxBlocks:5,params:3,cpu:.5,blocks:{rec_start_stop:{initial:!0,param:!0,position:0},rhythm_in:{initial:!0,param:!0,position:1},play:{initial:!0,param:!0,position:2},done_out:{position:3},rhythm_out:{initial:!0,position:4}},options:{done_ctrl:{slot:0,values:["on","off"]}},conditions:{done_out:{type:"toggle",option:"done_ctrl"}}},{id:38,name:"Noise",category:r.Audio,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.4,blocks:{audio_out:{initial:!0,position:0}},options:{}},{id:39,name:"Random",category:r.Control,defaultBlocks:1,minBlocks:1,maxBlocks:2,params:1,cpu:.1,blocks:{trigger_in:{param:!0,position:0},cv_out:{initial:!0,position:1}},options:{output:{slot:0,values:["0 to 1","-1 to 1"]},new_val_on_trig:{slot:1,values:["off","on"]}},conditions:{trigger_in:{type:"toggle",option:"new_val_on_trig"}}},{id:40,name:"Gate",category:r.Effect,defaultBlocks:5,minBlocks:3,maxBlocks:8,params:3,cpu:3,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},threshold:{initial:!0,param:!0,position:2},attack:{param:!0,position:3},release:{param:!0,position:4},sidechain_in:{position:7},audio_out_L:{initial:!0,position:5,sort:8},audio_out_R:{position:6,sort:9}},options:{attack_ctrl:{slot:0,values:["off","on"]},release_ctrl:{slot:1,values:["off","on"]},channels:{slot:2,values:["1in->1out","stereo"]},sidechain:{slot:3,values:["internal","external"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},attack:{type:"toggle",option:"attack_ctrl"},release:{type:"toggle",option:"release_ctrl"},sidechain_in:{type:"value",option:"sidechain",value:"external"},audio_out_R:{type:"value",option:"channels",value:"stereo"}}},{id:41,name:"Tremolo",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:6,params:2,cpu:2,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},direct:{param:!0,position:7,sort:2},depth:{initial:!0,param:!0,position:4},audio_out_L:{initial:!0,position:5},audio_out_R:{position:6}},options:{channels:{slot:0,values:["1in->1out","1in->2out","2in->2out"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]},waveform:{slot:2,values:["fender-ish","vox-ish","triangle","sine","square"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"2in->2out"}]},rate:{type:"value",option:"control",value:"rate"},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},direct:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"2in->2out"}]}}},{id:42,name:"Tone Control",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:10,params:6,cpu:5,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},low_shelf:{initial:!0,param:!0,position:2},mid_gain_1:{initial:!0,param:!0,position:3},mid_freq_1:{initial:!0,param:!0,position:4},mid_gain_2:{param:!0,position:5},mid_freq_2:{param:!0,position:6},high_shelf:{initial:!0,param:!0,position:7},audio_out_L:{initial:!0,position:8},audio_out_R:{position:9}},options:{channels:{slot:0,values:["1in->1out","stereo"]},num_mid_bands:{slot:1,values:{min:1,max:2}}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},mid_gain_2:{type:"value",option:"num_mid_bands",value:2},mid_freq_2:{type:"value",option:"num_mid_bands",value:2},audio_out_R:{type:"value",option:"channels",value:"stereo"}}},{id:43,name:"Delay w/ Mod",category:r.Effect,defaultBlocks:7,minBlocks:7,maxBlocks:9,params:5,cpu:18,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},feedback:{initial:!0,param:!0,position:3},delay_time:{initial:!0,param:!0,position:4,sort:2.5},tap_tempo_in:{param:!0,position:5,sort:2.5},mod_rate:{initial:!0,param:!0,position:6},mod_depth:{initial:!0,param:!0,position:7},mix:{initial:!0,param:!0,position:2,sort:8},audio_out_L:{initial:!0,position:8,sort:9},audio_out_R:{position:9,sort:10}},options:{channels:{slot:0,values:["1in->1out","1in->2out","2in->2out"]},control:{slot:1,values:["rate","tap_tempo"]},type:{slot:2,values:["clean","tape","old_tape","bbd"]},tap_ratio:{slot:3,values:["1:1","2:3","1:2","1:3","3:8","1:4","3:16","1:8","1:16","1:32"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"2in->2out"},delay_time:{type:"value",option:"control",value:"rate"},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"2in->2out"}]}}},{id:44,name:"Stompswitch",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{stompswitch:{slot:0,values:["left","middle","right","ext"]},action:{slot:1,values:["momentary","latching"]},normally:{slot:2,values:["zero","one"]}}},{id:45,name:"Value",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:1,cpu:.15,blocks:{value:{initial:!0,param:!0,position:0},cv_out:{initial:!0,position:1}},options:{output:{slot:0,values:["0 to 1","-1 to 1"]}}},{id:46,name:"CV Delay",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:2,cpu:1.5,blocks:{cv_in:{initial:!0,param:!0,position:0},delay_time:{initial:!0,param:!0,position:1},cv_out:{initial:!0,position:2}},options:{cv_in:{slot:0,values:["exponent","linear"]}}},{id:47,name:"CV Loop",category:r.Control,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:7,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0},record:{initial:!0,param:!0,position:1},play:{initial:!0,param:!0,position:2},playback_speed:{initial:!0,param:!0,position:3},start_position:{param:!0,position:4},stop_position:{param:!0,position:5},restart_loop:{initial:!0,param:!0,position:6},cv_out:{initial:!0,position:7}},options:{max_rec_time:{slot:0,values:{min:1,max:16}},length_edit:{slot:1,values:["off","on"]}},conditions:{start_position:{type:"toggle",option:"length_edit"},stop_position:{type:"toggle",option:"length_edit"}}},{id:48,name:"CV Filter",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:4,params:2,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0},time_constant:{initial:!0,param:!0,position:1},rise_constant:{param:!0,position:3},fall_constant:{param:!0,position:4},cv_out:{initial:!0,position:2,sort:5}},options:{control:{slot:0,values:["linked","separate"]}},conditions:{time_constant:{type:"value",option:"control",value:"linked"},rise_constant:{type:"value",option:"control",value:"separate"},fall_constant:{type:"value",option:"control",value:"separate"}}},{id:49,name:"Clock Divider",category:r.Control,defaultBlocks:5,minBlocks:4,maxBlocks:5,params:4,cpu:.4,blocks:{cv_in:{initial:!0,param:!0,position:0},reset_in:{initial:!0,param:!0,position:1},modifier:{param:!0,position:2},dividend:{initial:!0,param:!0,position:4},divisor:{initial:!0,param:!0,position:5},cv_out:{initial:!0,position:3,sort:6}},options:{input:{slot:0,values:["tap","cv_control"]}},conditions:{dividend:{type:"version",version:[">=",1]},divisor:{type:"version",version:[">=",1]},modifier:{type:"version",version:["<",1]}}},{id:50,name:"Comparator",category:r.Control,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:2,cpu:.04,blocks:{cv_positive_input:{initial:!0,param:!0,position:0},cv_negative_input:{initial:!0,param:!0,position:1},cv_out:{initial:!0,position:2}},options:{output:{slot:0,values:["0 to 1","-1 to 1"]}}},{id:51,name:"CV Rectify",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:1,cpu:.02,blocks:{cv_in:{initial:!0,param:!0,position:0},cv_out:{initial:!0,position:1}},options:{}},{id:52,name:"Trigger",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:1,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0},cv_out:{initial:!0,position:1}},options:{}},{id:53,name:"Stereo Spread",category:r.Audio,defaultBlocks:5,minBlocks:4,maxBlocks:5,params:1,cpu:2,blocks:{audio_in_1:{initial:!0,position:0},audio_in_2:{position:1},side_gain:{param:!0,position:2},delay_time:{initial:!0,param:!0,position:3},audio_out_1:{initial:!0,position:4},audio_out_2:{initial:!0,position:5}},options:{method:{slot:0,values:["Mid-Side","Haas"]}},conditions:{delay_time:{type:"value",option:"method",value:"Haas"},audio_in_2:{type:"value",option:"method",value:"Mid-Side"},side_gain:{type:"value",option:"method",value:"Mid-Side"}}},{id:54,name:"CPort Exp CV In",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{output_range:{slot:0,values:["0 to 1","-1 to 1"]}}},{id:55,name:"CPort CV Out",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.2,blocks:{cv_in:{initial:!0,param:!0,position:0}},options:{input_range:{slot:0,values:["0 to 1","-1 to 1"]}}},{id:56,name:"UI Button",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:2,params:1,cpu:.04,blocks:{in:{initial:!0,param:!0,position:0},cv_out:{position:1}},options:{cv_out:{slot:0,values:["disabled","enabled"]},range:{slot:1,values:["basic","extended"]}},conditions:{cv_out:{type:"value",option:"cv_out",value:"enabled"}}},{id:57,name:"Audio Panner",category:r.Audio,defaultBlocks:4,minBlocks:4,maxBlocks:5,params:3,cpu:1,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},pan:{initial:!0,param:!0,position:2},audio_out_L:{initial:!0,position:3},audio_out_R:{initial:!0,position:4}},options:{channels:{slot:0,values:["1in->2out","2in->2out"]},pan_type:{slot:1,values:["equal_pwr","-4.5dB","linear"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"2in->2out"}}},{id:58,name:"Pitch Detector",category:r.Analysis,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:0,cpu:2.5,blocks:{audio_in:{initial:!0,position:0},cv_out:{initial:!0,position:1}},options:{}},{id:59,name:"Pitch Shifter",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:1,cpu:15.5,blocks:{audio_in:{initial:!0,position:0},pitch_shift:{initial:!0,param:!0,position:1},audio_out:{initial:!0,position:2}},options:{}},{id:60,name:"Midi Note Out",category:r.Interface,defaultBlocks:2,minBlocks:2,maxBlocks:3,params:3,cpu:.1,blocks:{note_in:{initial:!0,param:!0,position:0},gate_in:{initial:!0,param:!0,position:1},velocity_in:{param:!0,position:2}},options:{midi_channel:{slot:0,values:{min:1,max:16}},velocity_out:{slot:1,values:["off","on"]}},conditions:{velocity_in:{type:"toggle",option:"velocity_out"}}},{id:61,name:"Midi CC Out",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.2,blocks:{cc:{initial:!0,param:!0,position:0}},options:{midi_channel:{slot:0,values:{min:1,max:16}},controller:{slot:1,values:{min:0,max:127}}}},{id:62,name:"Midi PC Out",category:r.Interface,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:2,cpu:.1,blocks:{pc:{initial:!0,param:!0,position:0},trigger_in:{initial:!0,param:!0,position:1}},options:{midi_channel:{slot:0,values:{min:1,max:16}}}},{id:63,name:"Bit Modulator",category:r.Audio,defaultBlocks:3,minBlocks:3,maxBlocks:3,params:0,cpu:1.2,blocks:{audio_in_1:{initial:!0,position:0},audio_in_2:{initial:!0,position:1},audio_out:{initial:!0,position:2}},options:{type:{slot:0,values:["xor","and","or"]}}},{id:64,name:"Audio Balance",category:r.Audio,defaultBlocks:4,minBlocks:4,maxBlocks:7,params:1,cpu:1.7,blocks:{audio_in_1_L:{position:0},audio_in_1_R:{position:1},audio_in_2_L:{position:4,sort:1.1},audio_in_2_R:{position:5,sort:1.2},mix:{initial:!0,param:!0,position:2},audio_out_L:{initial:!0,position:3},audio_out_R:{position:6},audio_in_1:{initial:!0,position:0},audio_in_2:{initial:!0,position:1},audio_out:{initial:!0,position:3}},options:{stereo:{slot:0,values:["mono","stereo"]}},conditions:{audio_in_1_L:{type:"value",option:"stereo",value:"stereo"},audio_in_1_R:{type:"value",option:"stereo",value:"stereo"},audio_in_2_L:{type:"value",option:"stereo",value:"stereo"},audio_in_2_R:{type:"value",option:"stereo",value:"stereo"},audio_out_L:{type:"value",option:"stereo",value:"stereo"},audio_out_R:{type:"value",option:"stereo",value:"stereo"},audio_in_1:{type:"value",option:"stereo",value:"mono"},audio_in_2:{type:"value",option:"stereo",value:"mono"},audio_out:{type:"value",option:"stereo",value:"mono"}}},{id:65,name:"Inverter",category:r.Audio,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:0,cpu:.3,blocks:{audio_in:{initial:!0,position:0},audio_out:{initial:!0,position:1}},options:{}},{id:66,name:"Fuzz",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:4,params:2,cpu:16,blocks:{audio_in:{initial:!0,position:0},input_gain:{initial:!0,param:!0,position:1},output_gain:{initial:!0,param:!0,position:2},audio_out:{initial:!0,position:3}},options:{model:{slot:0,values:["efuzzy","burly","scoopy","ugly"]}}},{id:67,name:"Ghostverb",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:4,cpu:45,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},decay_feedback:{initial:!0,param:!0,position:2},rate:{initial:!0,param:!0,position:3},resonance:{initial:!0,param:!0,position:4},mix:{initial:!0,param:!0,position:5},audio_out_L:{initial:!0,position:6},audio_out_R:{position:7}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:68,name:"Cabinet Sim",category:r.Effect,defaultBlocks:2,minBlocks:2,maxBlocks:4,params:0,cpu:10,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},audio_out_L:{initial:!0,position:2},audio_out_R:{position:3}},options:{channels:{slot:0,values:["mono","stereo","1in->2out"]},type:{slot:1,values:["4x12_full","2x12_dark","2x12_modern","1x12","1x8_lofi","1x12_vintage","4x12_hifi"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"},{type:"value",option:"channels",value:"1in->2out"}]}}},{id:69,name:"Flanger",category:r.Effect,defaultBlocks:7,minBlocks:7,maxBlocks:9,params:5,cpu:11,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},direct:{param:!0,position:4},regen:{initial:!0,param:!0,position:5},width:{initial:!0,param:!0,position:6},tone_tilt_eq:{initial:!0,param:!0,position:7},mix:{initial:!0,param:!0,position:8},audio_out_L:{initial:!0,position:9},audio_out_R:{position:10}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]},type:{slot:2,values:["1960s","1970s","thru_0"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},direct:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:70,name:"Chorus",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:4,cpu:13,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},direct:{param:!0,position:4},width:{initial:!0,param:!0,position:5},tone_tilt_eq:{initial:!0,param:!0,position:6},mix:{initial:!0,param:!0,position:7},audio_out_L:{initial:!0,position:8},audio_out_R:{position:9}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]},type:{slot:2,values:["classic"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},direct:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:71,name:"Vibrato",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:6,params:2,cpu:5,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},direct:{param:!0,position:4},width:{initial:!0,param:!0,position:5},audio_out_L:{initial:!0,position:6},audio_out_R:{position:7}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]},waveform:{slot:2,values:["sine","triangle","swung_sine","swung"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},direct:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:72,name:"Env Filter",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:4,cpu:7,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},sensitivity:{initial:!0,param:!0,position:2},min_freq:{initial:!0,param:!0,position:3},max_freq:{initial:!0,param:!0,position:4},filter_q:{initial:!0,param:!0,position:5},audio_out_L:{initial:!0,position:6},audio_out_R:{position:7}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]},filter_type:{slot:1,values:["bpf","hpf","lpf"]},direction:{slot:2,values:["up","down"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:73,name:"Ring Modulator",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:6,params:3,cpu:14,blocks:{audio_in:{initial:!0,position:0},frequency:{initial:!0,param:!0,position:1},ext_in:{position:2},duty_cycle:{param:!0,position:3},mix:{initial:!0,param:!0,position:4},audio_out:{initial:!0,position:5}},options:{waveform:{slot:0,values:["sine","square","triangle","sawtooth"]},ext_audio_in:{slot:1,values:["off","on"]},duty_cycle:{slot:2,values:["off","on"]},upsampling:{slot:3,values:["none","2x"]}},conditions:{frequency:{type:"value",option:"ext_audio_in",value:"off"},ext_in:{type:"toggle",option:"ext_audio_in"},duty_cycle:{type:"toggle",option:"duty_cycle"}}},{id:74,name:"Hall Reverb",category:r.Effect,defaultBlocks:8,minBlocks:8,maxBlocks:8,params:4,cpu:22,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{initial:!0,position:1},decay_time:{initial:!0,param:!0,position:2},low_eq:{initial:!0,param:!0,position:6},lpf_freq:{initial:!0,param:!0,position:7},mix:{initial:!0,param:!0,position:3,sort:8},audio_out_L:{initial:!0,position:4,sort:9},audio_out_R:{initial:!0,position:5,sort:10}},options:{}},{id:75,name:"Ping Pong Delay",category:r.Effect,defaultBlocks:7,minBlocks:7,maxBlocks:9,params:5,cpu:18,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},delay_time:{initial:!0,param:!0,position:4,sort:2},tap_tempo_in:{param:!0,position:5,sort:2},feedback:{initial:!0,param:!0,position:3},mod_rate:{initial:!0,param:!0,position:6},mod_depth:{initial:!0,param:!0,position:7},mix:{initial:!0,param:!0,position:2,sort:7},audio_out_L:{initial:!0,position:8},audio_out_R:{initial:!0,position:9}},options:{channels:{slot:0,values:["1in->2out","stereo"]},control:{slot:1,values:["rate","tap_tempo"]},type:{slot:2,values:["clean","tape","old_tape","bbd"]},tap_ratio:{slot:3,values:["1:1","2:3","1:2","1:3","3:8","1:4","3:16","1:8","1:16","1:32"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},delay_time:{type:"value",option:"control",value:"rate"},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"}}},{id:76,name:"Audio Mixer",category:r.Audio,defaultBlocks:5,minBlocks:5,maxBlocks:34,params:16,cpu:7,blocks:{audio_in_1_L:{initial:!0,position:0},audio_in_1_R:{position:1},audio_in_2_L:{initial:!0,position:2},audio_in_2_R:{position:3},audio_in_3_L:{position:4},audio_in_3_R:{position:5},audio_in_4_L:{position:6},audio_in_4_R:{position:7},audio_in_5_L:{position:8},audio_in_5_R:{position:9},audio_in_6_L:{position:10},audio_in_6_R:{position:11},audio_in_7_L:{position:12},audio_in_7_R:{position:13},audio_in_8_L:{position:14},audio_in_8_R:{position:15},gain_1:{initial:!0,param:!0,position:16},gain_2:{initial:!0,param:!0,position:17},gain_3:{param:!0,position:18},gain_4:{param:!0,position:19},gain_5:{param:!0,position:20},gain_6:{param:!0,position:21},gain_7:{param:!0,position:22},gain_8:{param:!0,position:23},pan_1:{param:!0,position:24},pan_2:{param:!0,position:25},pan_3:{param:!0,position:26},pan_4:{param:!0,position:27},pan_5:{param:!0,position:28},pan_6:{param:!0,position:29},pan_7:{param:!0,position:30},pan_8:{param:!0,position:31},audio_out_L:{initial:!0,position:32},audio_out_R:{position:33}},options:{channels:{slot:0,values:{min:2,max:8}},stereo:{slot:1,values:["mono","stereo"]},panning:{slot:2,values:["off","on"]}},conditions:{audio_in_1_L:{type:"sequential",option:"channels",startPosition:0,nameTemplate:"audio_in_{n}_L"},audio_in_1_R:{type:"sequential",option:"channels",startPosition:1,nameTemplate:"audio_in_{n}_R",condition:{type:"value",option:"stereo",value:"stereo"}},gain_1:{type:"sequential",option:"channels",startPosition:16,nameTemplate:"gain_{n}"},pan_1:{type:"sequential",option:"channels",startPosition:24,nameTemplate:"pan_{n}",condition:{type:"toggle",option:"panning"}},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"stereo",value:"stereo"},{type:"toggle",option:"panning"}]}}},{id:77,name:"CV Flip Flop",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:2,params:1,cpu:.2,blocks:{cv_in:{initial:!0,param:!0,position:0},cv_out:{initial:!0,position:1}},options:{}},{id:78,name:"Diffuser",category:r.Audio,defaultBlocks:6,minBlocks:6,maxBlocks:6,params:4,cpu:2,blocks:{audio_in:{initial:!0,position:0},gain:{initial:!0,param:!0,position:1},size:{initial:!0,param:!0,position:2},mod_width:{initial:!0,param:!0,position:3},mod_rate:{initial:!0,param:!0,position:4},audio_out:{initial:!0,position:5}},options:{}},{id:79,name:"Reverb Lite",category:r.Effect,defaultBlocks:4,minBlocks:4,maxBlocks:6,params:2,cpu:10,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},decay_time:{initial:!0,param:!0,position:2},mix:{initial:!0,param:!0,position:3},audio_out_L:{initial:!0,position:4},audio_out_R:{position:5}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}},{id:80,name:"Room Reverb",category:r.Effect,defaultBlocks:8,minBlocks:8,maxBlocks:8,params:4,cpu:22,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{initial:!0,position:1},decay_time:{initial:!0,param:!0,position:2},low_eq:{initial:!0,param:!0,position:3},lpf_freq:{initial:!0,param:!0,position:4},mix:{initial:!0,param:!0,position:5},audio_out_L:{initial:!0,position:6},audio_out_R:{initial:!0,position:7}},options:{}},{id:81,name:"Pixel",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.01,blocks:{cv_in:{initial:!0,param:!0,position:0},audio_in:{position:1}},options:{control:{slot:0,values:["cv","audio"]}},conditions:{cv_in:{type:"value",option:"control",value:"cv"},audio_in:{type:"value",option:"control",value:"audio"}}},{id:82,name:"Midi Clock In",category:r.Interface,in:!0,defaultBlocks:1,minBlocks:1,maxBlocks:4,params:0,cpu:.1,blocks:{quarter_out:{initial:!0,position:0},clock_out:{position:1},reset_out:{position:2},run_out:{position:3}},options:{clock_out:{slot:0,values:["disabled","enabled"]},divider:{slot:1,values:["disabled","enabled"]},run_out:{slot:2,values:["disabled","enabled"]},beat_modifier:{slot:3,values:["1","2","3","4","6","12","1/12","1/6","1/4","1/3","1/2"]}},conditions:{clock_out:{type:"toggle",option:"clock_out"},reset_out:{type:"toggle",option:"divider"},run_out:{type:"toggle",option:"run_out"}}},{id:83,name:"Granular",category:r.Audio,defaultBlocks:8,minBlocks:8,maxBlocks:10,params:6,cpu:8,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},grain_size:{initial:!0,param:!0,position:2},grain_position:{initial:!0,param:!0,position:3},density:{initial:!0,param:!0,position:4},texture:{initial:!0,param:!0,position:5},speed_pitch:{initial:!0,param:!0,position:6},freeze:{initial:!0,param:!0,position:7},audio_out_L:{initial:!0,position:8},audio_out_R:{position:9}},options:{num_grains:{slot:0,values:{min:1,max:8}},channels:{slot:1,values:["mono","stereo"]},pos_control:{slot:2,values:["cv","tap_tempo"]},size_control:{slot:3,values:["cv","tap_tempo"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},audio_out_R:{type:"value",option:"channels",value:"stereo"}}},{id:84,name:"Midi Clock Out",category:r.Interface,defaultBlocks:3,minBlocks:1,maxBlocks:5,params:5,cpu:.3,blocks:{tap_cv_control:{initial:!0,param:!0,position:0},sent:{initial:!0,param:!0,position:1},reset:{initial:!0,param:!0,position:2},send_position:{param:!0,position:3},song_position:{param:!0,position:4}},options:{input:{slot:0,values:["tap","cv_control"]},run_in:{slot:1,values:["enabled","disabled"]},reset_in:{slot:2,values:["enabled","disabled"]},position:{slot:3,values:["disabled","enabled"]}},conditions:{send_position:{type:"toggle",option:"position"},song_position:{type:"toggle",option:"position"}}},{id:85,name:"Tap to CV",category:r.Control,defaultBlocks:2,minBlocks:2,maxBlocks:4,params:2,cpu:.12,blocks:{tap_input:{initial:!0,position:0},min_time:{param:!0,position:1},max_time:{param:!0,position:2},output:{initial:!0,position:3}},options:{range:{slot:0,values:["off","on"]},output:{slot:1,values:["linear","exponential"]}},conditions:{min_time:{type:"toggle",option:"range"},max_time:{type:"toggle",option:"range"}}},{id:86,name:"Midi Pitch Bend In",category:r.Interface,in:!0,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{pitch_bend:{initial:!0,position:0}},options:{midi_channel:{slot:0,values:{min:1,max:16}}}},{id:87,euro:!0,name:"Euro CV Out 4",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0}},options:{out_range:{slot:0,values:["0 to 10V","0 to 5V","-5 to 5V"]},in_range:{slot:1,values:["0 to 1","-1 to 1"]},transpose:{slot:2,values:["A","C"]}}},{id:88,euro:!0,name:"Euro CV In 1",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{out_range:{slot:0,values:["0 to 1","-1 to 1"]},in_range:{slot:1,values:["0 to 10V","0 to 5V","-5 to 5V"]},clock_filter:{slot:2,values:["none","2,8","1,4","5,5"]},transpose:{slot:3,values:["A","C"]}}},{id:89,euro:!0,name:"Euro CV In 2",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{out_range:{slot:0,values:["0 to 1","-1 to 1"]},in_range:{slot:1,values:["0 to 10V","0 to 5V","-5 to 5V"]},clock_filter:{slot:2,values:["none","2,8","1,4","5,5"]},transpose:{slot:3,values:["A","C"]}}},{id:90,euro:!0,name:"Euro CV In 3",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{out_range:{slot:0,values:["0 to 1","-1 to 1"]},in_range:{slot:1,values:["0 to 10V","0 to 5V","-5 to 5V"]},clock_filter:{slot:2,values:["none","2,8","1,4","5,5"]},transpose:{slot:3,values:["A","C"]}}},{id:91,euro:!0,name:"Euro CV In 4",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.1,blocks:{cv_out:{initial:!0,position:0}},options:{out_range:{slot:0,values:["0 to 1","-1 to 1"]},in_range:{slot:1,values:["0 to 10V","0 to 5V","-5 to 5V"]},clock_filter:{slot:2,values:["none","2,8","1,4","5,5"]},transpose:{slot:3,values:["A","C"]}}},{id:92,euro:!0,name:"Euro Headphone Amp",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.4,blocks:{level:{initial:!0,param:!0,position:0}},options:{}},{id:93,euro:!0,name:"Euro Audio Input L",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.4,blocks:{output_L:{initial:!0,position:0}},options:{input_pad:{slot:0,values:["6dB","12dB","no_pad"]}}},{id:94,euro:!0,name:"Euro Audio Input R",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.4,blocks:{output_R:{initial:!0,position:0}},options:{input_pad:{slot:0,values:["6dB","12dB","no_pad"]}}},{id:95,euro:!0,name:"Euro Audio Output L",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.4,blocks:{input_L:{initial:!0,position:0}},options:{}},{id:96,euro:!0,name:"Euro Audio Output R",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.4,blocks:{input_R:{initial:!0,position:0}},options:{}},{id:97,euro:!0,name:"Euro Pushbutton 1",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.02,blocks:{cv_out:{initial:!0,position:1}},options:{action:{slot:0,values:["momentary","latching"]},normally:{slot:1,values:["zero","one"]}}},{id:98,euro:!0,name:"Euro Pushbutton 2",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:0,cpu:.02,blocks:{cv_out:{initial:!0,position:1}},options:{action:{slot:0,values:["momentary","latching"]},normally:{slot:1,values:["zero","one"]}}},{id:99,euro:!0,name:"Euro CV Out 1",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0}},options:{out_range:{slot:0,values:["0 to 10V","0 to 5V","-5 to 5V"]},in_range:{slot:1,values:["0 to 1","-1 to 1"]},transpose:{slot:2,values:["A","C"]}}},{id:100,euro:!0,name:"Euro CV Out 2",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0}},options:{out_range:{slot:0,values:["0 to 10V","0 to 5V","-5 to 5V"]},in_range:{slot:1,values:["0 to 1","-1 to 1"]},transpose:{slot:2,values:["A","C"]}}},{id:101,euro:!0,name:"Euro CV Out 3",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.1,blocks:{cv_in:{initial:!0,param:!0,position:0}},options:{out_range:{slot:0,values:["0 to 10V","0 to 5V","-5 to 5V"]},in_range:{slot:1,values:["0 to 1","-1 to 1"]},transpose:{slot:2,values:["A","C"]}}},{id:102,name:"Sampler",category:r.Audio,defaultBlocks:6,minBlocks:6,maxBlocks:12,params:6,cpu:.9,blocks:{audio_in_L:{position:0},audio_in_R:{position:1},record:{param:!0,position:2},sample_playback:{initial:!0,param:!0,position:3},speed_pitch:{initial:!0,param:!0,position:4},direction:{param:!0,position:5},start:{initial:!0,param:!0,position:6},length:{initial:!0,param:!0,position:7},position_cv_out:{position:8},loop_end_cv_out:{position:9},audio_out_L:{initial:!0,position:10},audio_out_R:{initial:!0,position:11}},options:{record:{slot:0,values:["disabled","new sample","overdub","punch-in"]},playback:{slot:1,values:["trigger","gate","loop"]},reverse_button:{slot:2,values:["off","on"]},cv_outs:{slot:3,values:["off","on"]},channels:{slot:4,values:["stereo","mono"]}},conditions:{audio_in_L:{type:"multi",operator:"or",conditions:[{type:"value",option:"record",value:"new sample"},{type:"value",option:"record",value:"overdub"},{type:"value",option:"record",value:"punch-in"}]},audio_in_R:{type:"multi",operator:"and",conditions:[{type:"multi",operator:"or",conditions:[{type:"value",option:"record",value:"new sample"},{type:"value",option:"record",value:"overdub"},{type:"value",option:"record",value:"punch-in"}]},{type:"value",option:"channels",value:"stereo"}]},direction:{type:"toggle",option:"reverse_button"},position_cv_out:{type:"toggle",option:"cv_outs"},loop_end_cv_out:{type:"toggle",option:"cv_outs"}}},{id:103,name:"Device Control",category:r.Interface,defaultBlocks:1,minBlocks:1,maxBlocks:1,params:1,cpu:.1,blocks:{bypass:{initial:!0,param:!0,position:0},aux:{param:!0,position:0},performance:{param:!0,position:0}},options:{control:{slot:0,values:["bypass","stomp aux","perform"]}},conditions:{bypass:{type:"value",option:"control",value:"bypass"},aux:{type:"value",option:"control",value:"stomp aux"},performance:{type:"value",option:"control",value:"perform"}}},{id:104,name:"CV Mixer",category:r.Control,defaultBlocks:5,minBlocks:5,maxBlocks:17,params:16,cpu:.7,blocks:{cv_in_1:{initial:!0,param:!0,position:0},cv_in_2:{initial:!0,param:!0,position:1},cv_in_3:{param:!0,position:2},cv_in_4:{param:!0,position:3},cv_in_5:{param:!0,position:4},cv_in_6:{param:!0,position:5},cv_in_7:{param:!0,position:6},cv_in_8:{param:!0,position:7},atten_1:{initial:!0,param:!0,position:8},atten_2:{initial:!0,param:!0,position:9},atten_3:{param:!0,position:10},atten_4:{param:!0,position:11},atten_5:{param:!0,position:12},atten_6:{param:!0,position:13},atten_7:{param:!0,position:14},atten_8:{param:!0,position:15},cv_out:{initial:!0,position:16}},options:{num_channels:{slot:0,values:{min:1,max:8}},levels:{slot:1,values:["summing","average"]}},conditions:{cv_in_3:{type:"sequential",option:"num_channels",startPosition:2,nameTemplate:"cv_in_{n}"},atten_3:{type:"sequential",option:"num_channels",startPosition:10,nameTemplate:"atten_{n}"}}},{id:105,name:"Logic Gate",category:r.Control,defaultBlocks:3,minBlocks:2,maxBlocks:40,params:39,cpu:.1,blocks:{in_1:{initial:!0,param:!0,position:0},in_2:{initial:!0,param:!0,position:1},in_3:{param:!0,position:2},in_4:{param:!0,position:3},in_5:{param:!0,position:4},in_6:{param:!0,position:5},in_7:{param:!0,position:6},in_8:{param:!0,position:7},in_9:{param:!0,position:8},in_10:{param:!0,position:9},in_11:{param:!0,position:10},in_12:{param:!0,position:11},in_13:{param:!0,position:12},in_14:{param:!0,position:13},in_15:{param:!0,position:14},in_16:{param:!0,position:15},in_17:{param:!0,position:16},in_18:{param:!0,position:17},in_19:{param:!0,position:18},in_20:{param:!0,position:19},in_21:{param:!0,position:20},in_22:{param:!0,position:21},in_23:{param:!0,position:22},in_24:{param:!0,position:23},in_25:{param:!0,position:24},in_26:{param:!0,position:25},in_27:{param:!0,position:26},in_28:{param:!0,position:27},in_29:{param:!0,position:28},in_30:{param:!0,position:29},in_31:{param:!0,position:30},in_32:{param:!0,position:31},in_33:{param:!0,position:32},in_34:{param:!0,position:33},in_35:{param:!0,position:34},in_36:{param:!0,position:35},in_37:{param:!0,position:36},in_38:{param:!0,position:37},threshold:{param:!0,position:38},cv_out:{initial:!0,position:39}},options:{operation:{slot:0,values:["AND","OR","NOR","NAND","XOR","XNOR","NOT"]},num_of_inputs:{slot:1,values:{min:2,max:38}},threshold:{slot:2,values:["off","on"]}},conditions:{in_2:{type:"sequential",option:"num_of_inputs",startPosition:1,nameTemplate:"in_{n}"},threshold:{type:"toggle",option:"threshold"}}},{id:106,name:"Reverse Delay",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:9,params:5,cpu:.1,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},delay_time:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},tap_ratio:{param:!0,position:4},feedback:{initial:!0,param:!0,position:5},pitch:{initial:!0,param:!0,position:6},mix:{initial:!0,param:!0,position:7},audio_out_L:{initial:!0,position:8},audio_out_R:{position:9}},options:{channels:{slot:0,values:["mono","stereo"]},control:{slot:1,values:["rate","tap_tempo"]}},conditions:{audio_in_R:{type:"value",option:"channels",value:"stereo"},delay_time:{type:"value",option:"control",value:"rate"},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},tap_ratio:{type:"value",option:"control",value:"tap_tempo"},audio_out_R:{type:"value",option:"channels",value:"stereo"}}},{id:107,name:"Univibe",category:r.Effect,defaultBlocks:6,minBlocks:6,maxBlocks:8,params:4,cpu:.1,blocks:{audio_in_L:{initial:!0,position:0},audio_in_R:{position:1},rate:{initial:!0,param:!0,position:2},tap_tempo_in:{param:!0,position:3},direct:{param:!0,position:4},depth:{initial:!0,param:!0,position:5},resonance:{initial:!0,param:!0,position:6},mix:{initial:!0,param:!0,position:7},audio_out_L:{initial:!0,position:8},audio_out_R:{position:9}},options:{channels:{slot:0,values:["1in->1out","1in->2out","stereo"]},control:{slot:1,values:["rate","tap_tempo","cv_direct"]}},conditions:{audio_in_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"stereo"}]},tap_tempo_in:{type:"value",option:"control",value:"tap_tempo"},direct:{type:"value",option:"control",value:"cv_direct"},audio_out_R:{type:"multi",operator:"or",conditions:[{type:"value",option:"channels",value:"1in->2out"},{type:"value",option:"channels",value:"stereo"}]}}}],Fo=new TextDecoder("ascii",{ignoreBOM:!0});function St(t){let o=t.indexOf(0);return o===-1&&(o=t.length),Fo.decode(t.subarray(0,o)).replace(/^b"/,"").replace(/"$/,"").replace(/[^a-zA-Z0-9 .-]/g,"")}function Vo(t,o,i){const e=[];let n=(o+1)*4;for(let s=0;s<i;s++){const l=t.subarray(n,n+16),_=No(l,0,16);e.push(_),n+=16}return e}const qo=new TextDecoder("ascii",{ignoreBOM:!0});function No(t,o,i){let e=o;for(;e<o+i&&t[e]!==0;)e++;return qo.decode(t.subarray(o,e)).replace(/[^a-zA-Z0-9 .-]/g,"")}function Do(t,o){const i={},e=t[o+6];for(let n=0;n<e;n++)i[`param_${n}`]=t[o+n+10];return i}function $o(t){const o=Object.entries(t.blocks).filter(([,i])=>i.param).sort((i,e)=>i[1].position-e[1].position);for(let i=0;i<o.length;i++){const e=`param_${i}`;t.parameters[e]!==void 0&&(t.parameters[o[i][0]]=t.parameters[e],delete t.parameters[e])}}function zo(t){return P[t.id].conditions?To(t,P[t.id].conditions):{...P[t.id].blocks}}function To(t,o){const i={};t.blocks=P[t.id].blocks;for(const[e,n]of Object.entries(t.blocks))i[e]={...n};for(const[e,n]of Object.entries(o)){const s=t.blocks[e];if(s)switch(n.type){case"sequential":{Ho(n,s,t.options,i,t);break}default:{at(n,t.options,t.version)||delete i[e];break}}}return i}function at(t,o,i){switch(t.type){case"toggle":return o[t.option]===(t.enableValue??"on")||o[t.option]==="yes"||o[t.option]==="enabled";case"value":return o[t.option]===t.value;case"range":{const e=Number(o[t.option]);return(t.min===void 0||e>=t.min)&&(t.max===void 0||e<=t.max)}case"multi":return t.operator==="and"?t.conditions.every(e=>at(e,o,i)):t.conditions.some(e=>at(e,o,i));case"version":return t.version[0]===">="?i>=t.version[1]:i<t.version[1];case"sequential":return!0}}function Ho(t,o,i,e,n){const s=t.condition&&!at(t.condition,n.options,n.version)?0:Number(i[t.option]);for(let l=1;l<=s;l++){const _=t.nameTemplate.replace("{n}",l.toString()),d=e[_].position;e[_]={...o,position:d}}for(let l=s+1;l<=128;l++){const _=t.nameTemplate.replace("{n}",l.toString());if(e[_])delete e[_];else break}return e}function Go(t){const o=t.filter(i=>!i.euro).map(i=>jo(i));return{first:Math.min(...o),last:Math.max(...o)}}function jo(t){const o=t.page+Math.floor((t.position.at(-1)??0)/q);return o>127?127-o:o}function Uo(t,o){return Array.from({length:o},(i,e)=>t+e)}const _t=new WeakMap;function Ko(t){if(_t.has(t))return _t.get(t);const o=Object.entries(t).map(([i,e])=>({key:i,slot:e.slot,values:Array.isArray(e.values)?e.values:Wo(e.values)})).sort((i,e)=>i.slot-e.slot);return _t.set(t,o),o}function Wo(t){const o=(t==null?void 0:t.min)>(t==null?void 0:t.max)?-1:1;return Array.from({length:Math.abs(t.max-t.min+1)}).map((i,e)=>t.min+e*o)}function Yo(t){return t+4-(t%4||4)}const R=S("zoian:parser");function Ui(t,o=!1){R("parsing buffer %s",t.length),R("first byte %s",t[0]);const i=St(t.subarray(4));R("name",i),R("length",t.length),R("byteLength",t.buffer.byteLength);const e=new Int32Array(t.buffer),n=e[0];if(R("patch size",n),n>Mo)throw new Error(`Patch is too large! [${n}]`);const s=e.reduce((f,M,A)=>M!==0?A:f,0);R("last non zero",s);const l=s+1,_=l-e[5];let d=[],c=!1;for(let f=_;f<l;f++){if(e[f]>15){c=!0,d=[];break}d.push(e[f])}R("colors %s",d.length),R("parsing modules");const a=[],p=e[5];R("modules %s",p);let u=6;for(let f=0;f<p;f++){const M=u,A=e[u],G=e[u+1],At=e[u+4],Mt=c?"":d[f]||m.White,_o=Ko(P[G].options),Lt=[...Array.from(t.subarray((u+8)*4,(u+8)*4+4)),...Array.from(t.subarray((u+9)*4,(u+9)*4+4))],mo=t.subarray((u+(A-4))*4,(u+(A-4))*4+16).slice(),fo=t.subarray((u+10+e[u+6])*4,(u+10+e[u+6])*4+Yo(e[u+7])).slice(),O={number:f,id:G,type:P[G].name,name:St(mo),version:e[u+2],euro:P[G].euro,size:e[u],dataSize:e[u+7],page:e[u+3],color:Mt===""?At||m.White:Mt,options:{},parameterCount:e[u+6],parameters:Do(e,u),blocks:{},position:[e[u+5]]};o&&(O.originalColor=At,O.optionsBinary={},O.parametersRaw=[...e.subarray(u+10,u+10+e[u+6]).slice()],O.optionsList=Lt,O.offset=M,O.dataBytes=[...fo]);try{for(const{key:It,values:go,slot:vo}of _o){const Pt=Lt[vo],ho=go[Pt];O.options[It]=ho,O.optionsBinary&&(O.optionsBinary[It]=Pt)}}catch{throw new Error("Invalid option data!")}a.push(O),u+=A}const h=[],k=e[u];for(let f=0;f<k;f++)h.push({source:[e[u+1],e[u+2]],target:[e[u+3],e[u+4]],strength:e[u+5]}),u+=5;u++;for(const f of a)f.blocks=zo(f),f.position=Uo(f.position[0],Object.entries(f.blocks).length),f.position[0]>=q&&(o&&(f.originalPosition=f.position[0],f.originalPage=f.page),f.position=f.position.map(M=>M-q),f.page++,f.page=f.page>127?127-f.page:f.page),f.euro&&(R("euro module on page",f.page),f.page=f.page>=127?-1:f.page);const g=a.some(f=>f.euro),b=Go(a);R("pages %o",b);const B=e[u];R("stored pages %s",B);const L=Vo(t,u,B);for(;L.length&&!L.at(-1);)L.pop();for(;L.length<b.last+1;)L.push("");let Q=L.map((f,M)=>({name:f,index:M}));g&&(Q=[{name:"",index:-1},...Q]),u+=B*4;const N=[];u++;const lt=e[u];R("starred count: %s",lt);for(let f=0;f<lt;f++){const M=new DataView(t.buffer,(u+1)*4,4),A=[M.getInt16(0,!0),M.getInt16(2,!0)];N.push({module:A[0],block:A[1]%128,cc:A[1]>=128?Math.round(A[1]/128)-1:void 0}),u++}for(const f of a)$o(f);return{name:i,size:n,euro:g,pages:Q,numPages:o?B:void 0,modules:a,connections:h,starred:N,colors:o?d:void 0}}const dt=new WeakMap;function Y(t){if(dt.has(t))return dt.get(t);const o=Object.entries(t).sort((i,e)=>(i[1].sort??i[1].position)-(e[1].sort??e[1].position));return dt.set(t,o),o}function Xo(t){const o=new Map;let i=0;for(const{id:e,type:n,page:s}of t.modules){const l=P[e].cpu,_=o.has(e)?o.get(e):o.set(e,{id:e,type:n,cpu:l,pages:new Set,count:0}).get(e);i+=l,_.count++,_.pages.add(s)}return{sum:Math.round(i*10)/10,rows:[...o.values()].map(e=>{const n=[...e.pages];return{...e,pages:n,pagesDisplay:Zo([...e.pages]),cpuSum:Math.round(e.cpu*e.count*10)/10}}).sort((e,n)=>n.cpuSum-e.cpuSum)}}function Zo(t){if(!t.length)return"";const o=[];let i=t[0],e=t[0];t[0]===-1&&(o.push("Euroburo"),t.shift());for(let n=1;n<=t.length;n++)t[n]!==e+1&&(i+1===e?(o.push(i),o.push(e)):o.push(i===e?i:`${i}–${e}`),i=t[n]),e=t[n];return o.join(", ")}function Qo(t){let o=!1;const i=t.starred.map(e=>{const n=t.modules[e.module],s=n?Y(n.blocks)[e.block]:void 0;return n||(o=!0),{...e,module:n,blockEntry:s}});return o&&(i.error=o),i}const Jo=[{id:"io-cp-out",type:y.CPort,text:"C",title:"CPort CV Out",modules:[55]},{id:"io-cp-in",type:y.CPort,text:"C",title:"CPort In",input:!0,modules:[54]},{id:"io-st-x",type:y.Stomp,text:"X",title:"External Stompswitch",input:!0,modules:[{id:44,prop:"stompswitch",value:"ext"}]},{id:"io-midi-out",type:y.Midi,title:"Midi Out",modules:[60,61,62,84]},{id:"io-midi-in",type:y.Midi,title:"Midi In",input:!0,modules:[20,21,35,82,86]},{id:"io-out-r",type:y.Audio,text:"R",title:"Audio Out R",modules:[{id:2,block:"input_R"},96]},{id:"io-out-l",type:y.Audio,text:"L",title:"Audio Out L",modules:[{id:2,block:"input_L"},95]},{id:"io-in-l",type:y.Audio,text:"R",title:"Audio In R",input:!0,modules:[{id:1,block:"output_R"},94]},{id:"io-in-r",type:y.Audio,text:"L",title:"Audio In L",input:!0,modules:[{id:1,block:"output_L"},93]},{id:"io-st-1",type:y.Stomp,text:"1",title:"Left Stompswitch",input:!0,modules:[{id:44,prop:"stompswitch",value:"left"}]},{id:"io-st-2",type:y.Stomp,text:"2",title:"Middle Stompswitch",input:!0,modules:[{id:44,prop:"stompswitch",value:"middle"}]},{id:"io-st-3",type:y.Stomp,text:"3",title:"Right Stompswitch",input:!0,modules:[{id:44,prop:"stompswitch",value:"right"}]}],D=S("zoian:view-io");function no(t,o){const i=[t.id],e=[];for(const n of t.modules){if(Number.isInteger(n)){D("numbered module",n);const c=o.filter(a=>{var p;return((p=a.module)==null?void 0:p.id)===n});for(const a of c){const p=Y(a.module.blocks).at(-1),u=[a.module.number,p[1].position];D("numbered module connection found"),e.push({source:t.input?u:i,target:t.input?i:u})}continue}const s=n.block,l=n.prop,_=n.value;if(!(l&&_)&&!s){D("jack not found!");continue}const d=o.filter(c=>{var a;return((a=c.module)==null?void 0:a.id)===n.id});if(l&&_){D("prop module",n);for(const c of d)if(c.module.options[l]===_){const p=Y(c.module.blocks).at(-1),u=[c.module.number,p[1].position];D("prop module connection found"),e.push({source:t.input?i:u,target:t.input?u:i})}continue}if(!s){D("jack not found!");continue}for(const c of d){const a=c.module.blocks[s];if(a){const p=[c.module.number,a.position];D("block module connection found"),e.push({source:t.input?i:p,target:t.input?p:i})}}}return e}const Ft=S("zoian:link");function ao(t,o,i){const e=t.filter(s=>s.source.length===1).map(s=>Nt(s,o,i));e.forEach(Vt);const n=t.filter(s=>s.target.length===1).map(s=>Nt(s,o,i));n.forEach(Vt),o.from=e,o.to=n}function Vt(t){var o;if((o=t==null?void 0:t.toBlock)!=null&&o.moduleView){const i=t==null?void 0:t.toBlock;i.to.push(t),Ft("to module",i)}else{const i=t==null?void 0:t.fromBlock;i.from.push(t),Ft("from module",i)}}const ti=[82,84];function oi(t){const o=[];for(const i of t.modules){if(i.options.midi_channel===void 0&&!ti.includes(i.id))continue;const e=!!P[i.id].in;o.push({input:e,channel:i.options.midi_channel,module:i})}return{input:o.filter(i=>i.input),output:o.filter(i=>!i.input)}}var x=(t=>(t[t.Missing=-2]="Missing",t[t.Mixed=-1]="Mixed",t[t.Unknown=0]="Unknown",t[t.CV=1]="CV",t[t.Audio=2]="Audio",t))(x||{});const qt=S("zoian:view-connection-table"),ii="audio",ei="cv",ni=["L","R"],ai=["lowpass_out","hipass_out","bandpass_out","fm_input","sidechain_in","ext_in"];function si(t){let o=0,i=0,e=0,n=0,s=0;for(const _ of t.connections){const d=t.modules[_.source[0]],c=Y(d.blocks),a=t.modules[_.target[0]],p=Y(a.blocks),u=c.find(b=>b[1].position===_.source[1]),h=p.find(b=>b[1].position===_.target[1]),k=vt(u,d.id),g=vt(h,a.id);k===x.Missing||g===x.Missing?(qt("missing block"),s++):k===x.Unknown||g===x.Unknown?n++:k!==g?(qt("mixed %s %s",u==null?void 0:u[0],h==null?void 0:h[0],_),e++):k===x.CV?i++:k===x.Audio&&o++}const l=[{type:x.Audio,count:o},{type:x.CV,count:i},{type:x.Unknown,count:n},{type:x.Mixed,count:e},{type:x.Missing,count:s}].filter(_=>_.count);return{counts:{audio:o,cv:i,mixed:e,unknown:n,missing:s},rows:l,total:o+i+e+n+s}}function ri(t){return t.split("_")}function vt(t,o){if(!t)return x.Missing;const i=ri(t[0]);return i.includes(ii)?x.Audio:i.includes(ei)?x.CV:ni.includes(i.at(-1))||ai.includes(t[0])?x.Audio:(P[o].category===r.Control,x.CV)}const nt=S("zoian:view");function Ki(t){const o=[],i=t.modules.map(l=>{const _={module:l,spec:P[l.id],from:[],to:[],blockViews:[]};return _.blockViews=Y(l.blocks).map(([d,c],a)=>({name:d,index:a,block:c,type:vt([d,c],l.id),moduleView:_,from:[],to:[]})),o.push(..._.blockViews),_}),e=li(i,o),{connections:n,orphanConnections:s}=ui(t,i);for(const l of e)n.push(...l.from),n.push(...l.to);return{patch:t,moduleViews:i,blockViews:o,ioJackViews:e,connections:n,orphanConnections:s,midiTable:oi(t),cpuTable:Xo(t),starredTable:Qo(t),connectionTable:si(t)}}function ui(t,o){const i=[],e=[];for(const n of t.connections){const s=o[n.source[0]],l=n.source[1];s||nt("not found module",n.source[0]);const _=s.blockViews.find(u=>u.block.position===l),d=o[n.target[0]],c=n.target[1],a=d.blockViews.find(u=>u.block.position===c),p={connection:n,fromBlock:_,toBlock:a};_&&_.from.push(p),a&&a.to.push(p),i.push(p),(!p.fromBlock||!p.toBlock)&&e.push(p)}return{connections:i,orphanConnections:e}}function Nt(t,o,i){if(t.source.length===1){const e=t.target[0],n=t.target[1],s=i.find(l=>l.moduleView.module.number===e&&l.block.position===n);if(!s)throw nt("block views",i.length),nt("block not found",e,n),"block not found";return{connection:t,fromBlock:o,toBlock:s}}else{const e=t.source[0],n=t.source[1],s=i.find(l=>l.moduleView.module.number===e&&l.block.position===n);return s||nt("block not found",e,n),{connection:t,fromBlock:s,toBlock:o}}}function li(t,o){const i=[];for(const e of Jo){const n=no(e,t),s={jack:{id:e.id,io:!0,active:n.length>0},spec:e,from:[],to:[]};ao(n,s,o),i.push(s)}return i}const pi=[["SFilt"],["AuI"],["AuO"],["Alia"],["Seq"],[],["ADS"],[],["AMu","Aud Mu"],["BC"],["S&H","S&H"],["O&D","O&D"],["EnF","Env F"],["DlyL"],["Osci"],["PBu"],["Key"],["CVI"],["Step"],["SL","Slew Lim"],["MiNI","Mi Notes In"],["MiCI"],["Mlt"],["Cmp"],["MF"],["PRv"],["BDl","Buffer Dly"],["APF","All Pass Filt"],["Qnt"],["Phs"],["Loo"],["ISw"],["OSw"],["AIS","Aud In Sw"],["AOS","Aud Out Sw"],["MiP","Mi Pressure"],["OD","Onset Det"],["Rhy"],["Noi"],["Rnd"],[],["Tre"],["TCtrl","Tone Ctrl"],["DM","Dly w/ Mod"],["Sto","Stom"],["Val"],["CDly"],["CL"],["CFilt"],["CDi","Clock Div"],["Com"],["CR"],["Trig"],["SS","SS"],["CPI","CP In"],["CPO","CP Out"],["UBu"],["AP","Audio Pan"],["PD","Pitch Det"],["PS"],["NO","Mi Note Ou"],["CO"],["MPO"],["BM","Bit Mod"],["AB","Aud Balan"],["Inv"],[],["Gho"],["Cab","Cab Sim"],["Flg"],["Chr"],["Vib"],["EFilt"],["RM","Ring Mod"],["HRv"],["PPD","PPDly"],["AMx"],["CFF","CV Flip"],["Dif"],["RvL"],["RRv","Room Rv"],["Pix"],["MiCI","Mi Clock In"],["Grn"],["ClO","ClkO"],["TtC"],["MPI","MiPBI"],["CO4","CO4"],["CI1"],["CI2"],["CI3"],["CI4"],["EHA","EHA","EHA"],["EI1","EI1"],["EI2","EI2"],["EO1","EO1"],["EO2","EO2","EO2"],["PB1","PB1"],["PB2","PB2"],["CO1","CO1"],["CO2","CO2"],["CO3","CO3"],["Smp"],["DC","Device Ctrl"],["CMx"],["LG"],["RDl","Rev Dly"],["Uni"]],ci={attack:"atk",atten_1:"att1",atten_2:"att2",atten_3:"att3",atten_4:"att4",atten_5:"att5",atten_6:"att6",atten_7:"att7",atten_8:"att8",audio_in:"ai",audio_in_1:"ai1",audio_in_1_L:"ai1l",audio_in_1_R:"ai1r",audio_in_10:"ai10",audio_in_11:"ai11",audio_in_12:"ai12",audio_in_13:"ai13",audio_in_14:"ai14",audio_in_15:"ai15",audio_in_16:"ai16",audio_in_2:"ai2",audio_in_2_L:"ai2l",audio_in_2_R:"ai2r",audio_in_3:"ai3",audio_in_3_L:"ai3l",audio_in_3_R:"ai3r",audio_in_4:"ai4",audio_in_4_L:"ai4l",audio_in_4_R:"ai4r",audio_in_5:"ai5",audio_in_5_L:"ai5l",audio_in_5_R:"ai5r",audio_in_6:"ai6",audio_in_6_L:"ai6l",audio_in_6_R:"ai6r",audio_in_7:"ai7",audio_in_7_L:"ai7l",audio_in_7_R:"ai7r",audio_in_8:"ai8",audio_in_8_L:"ai8l",audio_in_8_R:"ai8r",audio_in_9:"ai9",audio_in_L:"ail",audio_in_R:"air",audio_out:"ao",audio_out_1:"ao1",audio_out_10:"ao10",audio_out_11:"ao11",audio_out_12:"ao12",audio_out_13:"ao13",audio_out_14:"ao14",audio_out_15:"ao15",audio_out_16:"ao16",audio_out_2:"ao2",audio_out_3:"ao3",audio_out_4:"ao4",audio_out_5:"ao5",audio_out_6:"ao6",audio_out_7:"ao7",audio_out_8:"ao8",audio_out_9:"ao9",audio_out_L:"aol",audio_out_R:"aor",aux:"aux",bandpass_out:"bapo",bypass:"bypa",cc:"cc",cc_out:"ccou",channel_pressure:"chan",clock_out:"cloc",control_in:"cont",crushed_bits:"crus",cv_control:"cctl",cv_in:"ci",cv_in_1:"ci1",cv_in_10:"ci10",cv_in_11:"ci11",cv_in_12:"ci12",cv_in_13:"ci13",cv_in_14:"ci14",cv_in_15:"ci15",cv_in_16:"ci16",cv_in_2:"ci2",cv_in_3:"ci3",cv_in_4:"ci4",cv_in_5:"ci5",cv_in_6:"ci6",cv_in_7:"ci7",cv_in_8:"ci8",cv_in_9:"ci9",cv_negative_input:"cvne",cv_out:"co",cv_out_1:"co1",cv_out_10:"co10",cv_out_11:"co11",cv_out_12:"co12",cv_out_13:"co13",cv_out_14:"co14",cv_out_15:"co15",cv_out_16:"co16",cv_out_2:"co2",cv_out_3:"co3",cv_out_4:"co4",cv_out_5:"co5",cv_out_6:"co6",cv_out_7:"co7",cv_out_8:"co8",cv_out_9:"co9",cv_positive_input:"cvpo",decay:"dec",decay_feedback:"deca",decay_time:"dect",delay:"dly",delay_time:"dlyt",density:"dens",depth:"dept",direct:"dire",direction:"dire",dividend:"divi",divisor:"divi",done_out:"done",duty_cycle:"duty",ext_in:"exti",fall_constant:"fcon",fall_time:"ftim",falling_lag:"fall",feedback:"fbk",filter_gain:"filt",filter_q:"filt",fm_input:"fmin",freeze:"free",frequency:"frq",gain:"gn",gain_1:"gn1",gain_2:"gn2",gain_3:"gn3",gain_4:"gn4",gain_5:"gn5",gain_6:"gn6",gain_7:"gn7",gain_8:"gn8",gate_in:"gate",gate_out:"go",gate_out_1:"go1",gate_out_2:"go2",gate_out_3:"go3",gate_out_4:"go4",gate_out_5:"go5",gate_out_6:"go6",gate_out_7:"go7",gate_out_8:"go8",grain_position:"gpos",grain_size:"grai",high_eq:"hieq",high_shelf:"hish",hipass_out:"hipo",hold_attack_decay:"had",hold_sustain_release:"hsr",in:"in",in_1:"in1",in_10:"in10",in_11:"in11",in_12:"in12",in_13:"in13",in_14:"in14",in_15:"in15",in_16:"in16",in_17:"in17",in_18:"in18",in_19:"in19",in_2:"in2",in_20:"in20",in_21:"in21",in_22:"in22",in_23:"in23",in_24:"in24",in_25:"in25",in_26:"in26",in_27:"in27",in_28:"in28",in_29:"in29",in_3:"in3",in_30:"in30",in_31:"in31",in_32:"in32",in_33:"in33",in_34:"in34",in_35:"in35",in_36:"in36",in_37:"in37",in_38:"in38",in_4:"in4",in_5:"in5",in_6:"in6",in_7:"in7",in_8:"in8",in_9:"in9",in_select:"inse",input:"in",input_gain:"ing",input_L:"inl",input_R:"inr",key:"key",key_input_gate:"kig",key_input_note:"kin",length:"leng",level:"lvl",level_control:"lvlc",loop_end_cv_out:"loop",loop_length:"loop",low_eq:"lowe",low_shelf:"lows",lowpass_out:"lopo",lpf_freq:"lpff",max_freq:"maxf",max_time:"mtim",mid_freq_1:"mf1",mid_freq_2:"mf2",mid_gain_1:"mg1",mid_gain_2:"mg2",min_freq:"minf",min_time:"mint",mix:"mix",mod_depth:"modd",mod_rate:"modr",mod_width:"modw",modifier:"modi",modulation_in:"modi",note_1:"nt1",note_10:"nt10",note_11:"nt11",note_12:"nt12",note_13:"nt13",note_14:"nt14",note_15:"nt15",note_16:"nt16",note_17:"nt17",note_18:"nt18",note_19:"nt19",note_2:"nt2",note_20:"nt20",note_21:"nt21",note_22:"nt22",note_23:"nt23",note_24:"nt24",note_25:"nt25",note_26:"nt26",note_27:"nt27",note_28:"nt28",note_29:"nt29",note_3:"nt3",note_30:"nt30",note_31:"nt31",note_32:"nt32",note_33:"nt33",note_34:"nt34",note_35:"nt35",note_36:"nt36",note_37:"nt37",note_38:"nt38",note_39:"nt39",note_4:"nt4",note_40:"nt40",note_5:"nt5",note_6:"nt6",note_7:"nt7",note_8:"nt8",note_9:"nt9",note_in:"note",note_out:"no",note_out_1:"no1",note_out_2:"no2",note_out_3:"no3",note_out_4:"no4",note_out_5:"no5",note_out_6:"no6",note_out_7:"no7",note_out_8:"no8",alias_amount:"aa",out_select:"osel",out_track_1:"out1",out_track_2:"out2",out_track_3:"out3",out_track_4:"out4",out_track_5:"out5",out_track_6:"out6",out_track_7:"out7",out_track_8:"out8",output:"out",output_gain:"outg",output_L:"outl",output_R:"outr",pan:"pan",pan_1:"pn1",pan_2:"pn2",pan_3:"pn3",pan_4:"pn4",pan_5:"pn5",pan_6:"pn6",pan_7:"pn7",pan_8:"pn8",pc:"pc",performance:"perf",phase_input:"phsi",phase_reset:"phsr",pitch:"pi",pitch_bend:"pib",pitch_shift:"pish",play:"play",playback_speed:"play",position_cv_out:"pvo",q:"q",quant_steps:"quan",quarter_out:"qo",queue_start:"qs",rate:"rate",ratio:"rati",rec_start_stop:"rss",record:"rec",regen:"rege",release:"rel",reset:"rst",reset_in:"rsti",reset_out:"rsto",resonance:"reso",restart_loop:"resl",restart_playback:"resp",retrigger:"retr",reverse_playback:"revp",rhythm_in:"rhyi",rhythm_out:"rhyo",rise_constant:"rcon",rise_time:"rtim",rising_lag:"rlag",run_out:"runo",sample_playback:"spla",scale:"scal",send_position:"spos",sensitivity:"sens",sent:"sent",side_gain:"sidg",sidechain_in:"side",size:"size",slew_rate:"slew",song_position:"spos",speed_pitch:"spee",start:"star",start_position:"spos",step_1:"st1",step_10:"st10",step_11:"st11",step_12:"st12",step_13:"st13",step_14:"st14",step_15:"st15",step_16:"st16",step_17:"st17",step_18:"st18",step_19:"st19",step_2:"st2",step_20:"st20",step_21:"st21",step_22:"st22",step_23:"st23",step_24:"st24",step_25:"st25",step_26:"st26",step_27:"st27",step_28:"st28",step_29:"st29",step_3:"st3",step_30:"st30",step_31:"st31",step_32:"st32",step_4:"st4",step_5:"st5",step_6:"st6",step_7:"st7",step_8:"st8",step_9:"st9",stop_play:"stop",stop_position:"spos",sustain:"sus",swing_amount:"swin",tap_control:"tctl",tap_cv_control:"tctl",tap_input:"tapi",tap_ratio:"tapr",tap_tempo_in:"tapt",texture:"text",threshold:"thr",time_constant:"tcon",tone_tilt_eq:"tone",trigger:"trig",trigger_in:"ti",trigger_out:"to",trigger_out_1:"to1",trigger_out_2:"to2",trigger_out_3:"to3",trigger_out_4:"to4",trigger_out_5:"to5",trigger_out_6:"to6",trigger_out_7:"to7",trigger_out_8:"to8",value:"val",velocity_in:"velo",velocity_out_1:"vo1",velocity_out_2:"vo2",velocity_out_3:"vo3",velocity_out_4:"vo4",velocity_out_5:"vo5",velocity_out_6:"vo6",velocity_out_7:"vo7",velocity_out_8:"vo8",width:"wid"};function rt(t,o,i){t.prototype=o.prototype=i,i.constructor=t}function xt(t,o){var i=Object.create(t.prototype);for(var e in o)i[e]=o[e];return i}function Z(){}var H=.7,X=1/H,W="\\s*([+-]?\\d+)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_i=/^#([0-9a-f]{3,8})$/,di=new RegExp(`^rgb\\(${W},${W},${W}\\)$`),mi=new RegExp(`^rgb\\(${E},${E},${E}\\)$`),fi=new RegExp(`^rgba\\(${W},${W},${W},${J}\\)$`),gi=new RegExp(`^rgba\\(${E},${E},${E},${J}\\)$`),vi=new RegExp(`^hsl\\(${J},${E},${E}\\)$`),hi=new RegExp(`^hsla\\(${J},${E},${E},${J}\\)$`),Dt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rt(Z,Bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHex8:yi,formatHsl:ki,formatRgb:zt,toString:zt});function $t(){return this.rgb().formatHex()}function yi(){return this.rgb().formatHex8()}function ki(){return ro(this).formatHsl()}function zt(){return this.rgb().formatRgb()}function Bt(t){var o,i;return t=(t+"").trim().toLowerCase(),(o=_i.exec(t))?(i=o[1].length,o=parseInt(o[1],16),i===6?Tt(o):i===3?new C(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):i===8?ot(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):i===4?ot(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=di.exec(t))?new C(o[1],o[2],o[3],1):(o=mi.exec(t))?new C(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=fi.exec(t))?ot(o[1],o[2],o[3],o[4]):(o=gi.exec(t))?ot(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=vi.exec(t))?jt(o[1],o[2]/100,o[3]/100,1):(o=hi.exec(t))?jt(o[1],o[2]/100,o[3]/100,o[4]):Dt.hasOwnProperty(t)?Tt(Dt[t]):t==="transparent"?new C(NaN,NaN,NaN,0):null}function Tt(t){return new C(t>>16&255,t>>8&255,t&255,1)}function ot(t,o,i,e){return e<=0&&(t=o=i=NaN),new C(t,o,i,e)}function so(t){return t instanceof Z||(t=Bt(t)),t?(t=t.rgb(),new C(t.r,t.g,t.b,t.opacity)):new C}function ht(t,o,i,e){return arguments.length===1?so(t):new C(t,o,i,e??1)}function C(t,o,i,e){this.r=+t,this.g=+o,this.b=+i,this.opacity=+e}rt(C,ht,xt(Z,{brighter(t){return t=t==null?X:Math.pow(X,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?H:Math.pow(H,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new C(z(this.r),z(this.g),z(this.b),st(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ht,formatHex:Ht,formatHex8:bi,formatRgb:Gt,toString:Gt}));function Ht(){return`#${$(this.r)}${$(this.g)}${$(this.b)}`}function bi(){return`#${$(this.r)}${$(this.g)}${$(this.b)}${$((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gt(){const t=st(this.opacity);return`${t===1?"rgb(":"rgba("}${z(this.r)}, ${z(this.g)}, ${z(this.b)}${t===1?")":`, ${t})`}`}function st(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function z(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $(t){return t=z(t),(t<16?"0":"")+t.toString(16)}function jt(t,o,i,e){return e<=0?t=o=i=NaN:i<=0||i>=1?t=o=NaN:o<=0&&(t=NaN),new I(t,o,i,e)}function ro(t){if(t instanceof I)return new I(t.h,t.s,t.l,t.opacity);if(t instanceof Z||(t=Bt(t)),!t)return new I;if(t instanceof I)return t;t=t.rgb();var o=t.r/255,i=t.g/255,e=t.b/255,n=Math.min(o,i,e),s=Math.max(o,i,e),l=NaN,_=s-n,d=(s+n)/2;return _?(o===s?l=(i-e)/_+(i<e)*6:i===s?l=(e-o)/_+2:l=(o-i)/_+4,_/=d<.5?s+n:2-s-n,l*=60):_=d>0&&d<1?0:l,new I(l,_,d,t.opacity)}function yt(t,o,i,e){return arguments.length===1?ro(t):new I(t,o,i,e??1)}function I(t,o,i,e){this.h=+t,this.s=+o,this.l=+i,this.opacity=+e}rt(I,yt,xt(Z,{brighter(t){return t=t==null?X:Math.pow(X,t),new I(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?H:Math.pow(H,t),new I(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,o=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,e=i+(i<.5?i:1-i)*o,n=2*i-e;return new C(mt(t>=240?t-240:t+120,n,e),mt(t,n,e),mt(t<120?t+240:t-120,n,e),this.opacity)},clamp(){return new I(Ut(this.h),it(this.s),it(this.l),st(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=st(this.opacity);return`${t===1?"hsl(":"hsla("}${Ut(this.h)}, ${it(this.s)*100}%, ${it(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ut(t){return t=(t||0)%360,t<0?t+360:t}function it(t){return Math.max(0,Math.min(1,t||0))}function mt(t,o,i){return(t<60?o+(i-o)*t/60:t<180?i:t<240?o+(i-o)*(240-t)/60:o)*255}const xi=Math.PI/180,Bi=180/Math.PI;var uo=-.14861,Ct=1.78277,wt=-.29227,ut=-.90649,tt=1.97294,Kt=tt*ut,Wt=tt*Ct,Yt=Ct*wt-ut*uo;function Ci(t){if(t instanceof T)return new T(t.h,t.s,t.l,t.opacity);t instanceof C||(t=so(t));var o=t.r/255,i=t.g/255,e=t.b/255,n=(Yt*e+Kt*o-Wt*i)/(Yt+Kt-Wt),s=e-n,l=(tt*(i-n)-wt*s)/ut,_=Math.sqrt(l*l+s*s)/(tt*n*(1-n)),d=_?Math.atan2(l,s)*Bi-120:NaN;return new T(d<0?d+360:d,_,n,t.opacity)}function kt(t,o,i,e){return arguments.length===1?Ci(t):new T(t,o,i,e??1)}function T(t,o,i,e){this.h=+t,this.s=+o,this.l=+i,this.opacity=+e}rt(T,kt,xt(Z,{brighter(t){return t=t==null?X:Math.pow(X,t),new T(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?H:Math.pow(H,t),new T(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*xi,o=+this.l,i=isNaN(this.s)?0:this.s*o*(1-o),e=Math.cos(t),n=Math.sin(t);return new C(255*(o+i*(uo*e+Ct*n)),255*(o+i*(wt*e+ut*n)),255*(o+i*(tt*e)),this.opacity)}}));const Rt=t=>()=>t;function lo(t,o){return function(i){return t+i*o}}function wi(t,o,i){return t=Math.pow(t,i),o=Math.pow(o,i)-t,i=1/i,function(e){return Math.pow(t+e*o,i)}}function po(t,o){var i=o-t;return i?lo(t,i>180||i<-180?i-360*Math.round(i/360):i):Rt(isNaN(t)?o:t)}function Ri(t){return(t=+t)==1?F:function(o,i){return i-o?wi(o,i,t):Rt(isNaN(o)?i:o)}}function F(t,o){var i=o-t;return i?lo(t,i):Rt(isNaN(t)?o:t)}const Xt=function t(o){var i=Ri(o);function e(n,s){var l=i((n=ht(n)).r,(s=ht(s)).r),_=i(n.g,s.g),d=i(n.b,s.b),c=F(n.opacity,s.opacity);return function(a){return n.r=l(a),n.g=_(a),n.b=d(a),n.opacity=c(a),n+""}}return e.gamma=t,e}(1);function Ai(t){return function(o,i){var e=t((o=yt(o)).h,(i=yt(i)).h),n=F(o.s,i.s),s=F(o.l,i.l),l=F(o.opacity,i.opacity);return function(_){return o.h=e(_),o.s=n(_),o.l=s(_),o.opacity=l(_),o+""}}}const Mi=Ai(po);function co(t){return function o(i){i=+i;function e(n,s){var l=t((n=kt(n)).h,(s=kt(s)).h),_=F(n.s,s.s),d=F(n.l,s.l),c=F(n.opacity,s.opacity);return function(a){return n.h=l(a),n.s=_(a),n.l=d(Math.pow(a,i)),n.opacity=c(a),n+""}}return e.gamma=o,e}(1)}const v=co(po);co(F);function Wi(){const t={[m.Red]:"#ec4244",[m.Orange]:"#EE8C5C",[m.Mango]:"#F3B18A",[m.Yellow]:"#eeda6e",[m.Lime]:"#c6e86a",[m.Green]:"#6EED9F",[m.Surf]:"#7cdbf1",[m.Aqua]:"#78b5e5",[m.Sky]:"#B1D6FB",[m.Blue]:"#539bf8",[m.Purple]:"#ab62fa",[m.Magenta]:"#dc56fc",[m.Pink]:"#fa87f0",[m.Peach]:"#E769B6",[m.White]:"#d8d8d8"},o={[m.Red]:{400:"#E14E50"},[m.Orange]:{400:"#E18D5C"},[m.Mango]:{400:"#E19A6E"},[m.Yellow]:{400:"#E1D571"},[m.Lime]:{400:"#A1E171"},[m.Green]:{400:"#71C693"},[m.Surf]:{400:"#71C6C6"},[m.Aqua]:{400:"#71B8E1"},[m.Sky]:{400:"#71A1E1"},[m.Blue]:{400:"#4F8DDD"},[m.Purple]:{400:"#986ACA"},[m.Magenta]:{400:"#CA70D5"},[m.Pink]:{400:"#E16EA7"},[m.Peach]:{400:"#E16E7C"},[m.White]:{400:"#9C9C9C"}},i=["rgb(255,43,43)","rgb(238,157,34)","rgb(236,189,31)","rgb(241,203,88)","rgb(172,239,87)","rgb(128,245,117)","rgb(117,155,163)","rgb(75,115,179)","rgb(105,162,214)","rgb(74,74,255)","rgb(149,129,200)","rgb(255,66,255)","rgb(129,54,101)","rgb(113,76,69)","rgb(128,128,128)"],e=[t[m.Red],v(t[m.Orange],i[1])(.5),v(t[m.Mango],i[2])(.8),v(t[m.Yellow],"yellow")(.08),v(t[m.Lime],"yellow")(.08),v(t[m.Green],i[5])(.1),v(t[m.Surf],o[m.Surf][400])(.06),v(t[m.Aqua],o[m.Aqua][400])(.5),v(t[m.Sky],i[8])(.1),v(t[m.Blue],i[9])(.2),v(t[m.Purple],i[8])(.1),v(t[m.Magenta],i[11])(.7),v(t[m.Pink],o[m.Pink][400])(.05),v(t[m.Peach],o[m.Mango][400])(.4),t[m.White]],n=[v(e[0],"#fff")(.65),v(e[1],"#fff")(.57),v(e[2],"#fff")(.5),v(e[3],"#fff")(.4),v(e[4],"#fff")(.45),v(e[5],"#fff")(.55),v(e[6],"#fff")(.45),v(e[7],"#fff")(.5),v(e[8],"#fff")(.5),v(e[9],"#fff")(.5),v(e[10],"#fff")(.6),v(e[11],"#fff")(.66),v(e[12],"#fff")(.55),v(e[13],"#fff")(.66),v(e[14],"#fff")(.75)],s=[v(e[0],"#000")(.3),v(e[1],"#000")(.3),v(e[2],"#000")(.3),v(e[3],"#000")(.3),v(e[4],"#000")(.4),v(e[5],"#000")(.5),v(e[6],"#000")(.45),v(e[7],"#000")(.4),v(e[8],"#000")(.4),v(e[9],"#000")(.4),v(e[10],"#000")(.4),v(e[11],"#000")(.5),v(e[12],"#000")(.4),v(e[13],"#000")(.4),v(e[14],"#000")(.5)],l=n.map(c=>Xt.gamma(2.2)(v(c,"#888")(.06),"#ddd")(.25)),_=s.map(c=>{let a=Mi(c,"#000")(.12);return a=Xt.gamma(2.1)(a,"rgb(18,18,18)")(.4),a}),d=Lo.reduce((c,a,p)=>(c[a]={light:l[p],dark:_[p],base:e[p]},c),{});return{RGBColors:t,DocColors:i,ColorScales:o,AdjustedColors:e,LightColors:n,DesaColors:l,DarkColors:s,DesaDarkColors:_,BLOCK_COLORS:d}}const bt={1:{light:"rgb(176, 198, 247)",dark:"rgb(24, 61, 127)",base:"rgb(76, 140, 254)"},2:{light:"rgb(191, 241, 200)",dark:"rgb(12, 107, 37)",base:"rgb(111, 238, 155)"},3:{light:"rgb(243, 186, 186)",dark:"rgb(129, 28, 29)",base:"#ec4244"},4:{light:"rgb(243, 226, 165)",dark:"rgb(138, 113, 12)",base:"rgb(242, 221, 96)"},5:{light:"rgb(191, 214, 243)",dark:"rgb(33, 81, 113)",base:"rgb(116, 182, 227)"},6:{light:"rgb(246, 187, 242)",dark:"rgb(107, 14, 113)",base:"rgb(244, 72, 255)"},7:{light:"rgb(234, 234, 234)",dark:"rgb(75, 75, 75)",base:"#d8d8d8"},8:{light:"rgb(245, 205, 174)",dark:"rgb(138, 66, 12)",base:"rgb(242, 146, 64)"},9:{light:"rgb(223, 235, 167)",dark:"rgb(77, 118, 12)",base:"rgb(200, 236, 91)"},10:{light:"rgb(188, 227, 246)",dark:"rgb(16, 97, 116)",base:"rgb(123, 218, 239)"},11:{light:"rgb(210, 224, 247)",dark:"rgb(47, 92, 136)",base:"rgb(169, 209, 249)"},12:{light:"rgb(222, 193, 242)",dark:"rgb(72, 39, 127)",base:"rgb(161, 105, 251)"},13:{light:"rgb(246, 197, 241)",dark:"rgb(131, 38, 121)",base:"rgb(250, 133, 237)"},14:{light:"rgb(245, 203, 214)",dark:"rgb(123, 40, 59)",base:"rgb(241, 119, 147)"},15:{light:"rgb(246, 214, 161)",dark:"rgb(140, 88, 12)",base:"rgb(243, 183, 54)"}},ft=S("zoian:grid");function Li(t){const o=Array.from({length:t.patch.pages.length*q}),i=[];ft("pages",t.patch.pages.length),ft("grid size",o.length);for(const e of t.moduleViews){const n=e.module.page*q,s=e.module.position[0],l=e.blockViews,_=t.patch.euro?1:0;for(const d of l){const c=s+d.index,a=c%K,p=(c-a)/K;if(c>=q)continue;const u=c===e.module.position[0],h=e.module.page+_,k={pos:"block",page:h,x:a,y:p,index:h*q+p*K+a,position:c,first:u,last:c===e.module.position.at(-1),module:e.module,moduleView:e,block:d.block,blockName:d.name,blockTitle:d.name.replaceAll("_"," "),blockView:d,colors:bt[e.module.color]},g=n+c+_*q;o[g]&&i.push(o[g]),o[g]=k}}return o.forEach((e,n)=>{var s,l,_,d;if(e){if(e.last||(e.forcedLast=!o[n+1]||((s=o[n+1])==null?void 0:s.module)!==e.module),e.first){let c=0,a=n;for(;((l=o[a])==null?void 0:l.module)===e.module&&((_=o==null?void 0:o[a])==null?void 0:_.x)<K&&(c++,a++,!!((d=o==null?void 0:o[a])!=null&&d.x)););e.display=pi[e.module.id][c-1]||e.module.type}e.blockDisplay=ci[e.blockName],e.colors=bt[e.module.color]}}),ft("final grid size",o.length),[o,i]}const w=[{id:"eu-in-l",type:y.Audio,text:"L",title:"Audio In L",input:!0,side:V.Side,modules:[{id:1,block:"output_L"},93]},{id:"eu-in-R",type:y.Audio,text:"R",title:"Audio In R",input:!0,side:V.Side,modules:[{id:1,block:"output_R"},94]},{id:"eu-out-L",type:y.Audio,text:"L",title:"Audio Out L",side:V.Side,modules:[{id:2,block:"input_L"},95]},{id:"eu-out-R",type:y.Audio,text:"R",title:"Audio Out R",side:V.Side,modules:[{id:2,block:"input_R"},96]},{id:"eu-hp",type:y.Headphones,text:"H",title:"Headphones",side:V.Side,modules:[2,92,95,96]},{id:"eu-midi-in",type:y.Midi,title:"Midi In",input:!0,side:V.Side,modules:[20,21,35,82,86]},{id:"eu-in-1",type:y.Audio,text:"1",title:"CV In 1",input:!0,modules:[88]},{id:"eu-in-2",type:y.Audio,text:"2",title:"CV In 2",input:!0,modules:[89]},{id:"eu-in-3",type:y.Audio,text:"3",title:"CV In 3",input:!0,modules:[90]},{id:"eu-in-4",type:y.Audio,text:"4",title:"CV In 4",input:!0,modules:[91]},{id:"eu-out-1",type:y.Audio,text:"1",title:"CV Out 1",modules:[99]},{id:"eu-out-2",type:y.Audio,title:"CV Out 2",text:"2",modules:[100]},{id:"eu-out-3",type:y.Audio,title:"CV Out 3",text:"3",modules:[101]},{id:"eu-out-4",type:y.Audio,title:"CV Out 14",text:"4",modules:[87]},{id:"eu-midi-out",title:"Midi Out",type:y.Midi,side:V.Side,modules:[60,61,62,84]}],Ii=S("zoian:euro"),Pi=[0,0,1,1,1,1,1,1,1,1,93,w[0],0,0,1,1,1,1,1,1,1,1,94,w[1],0,0,1,1,1,1,1,1,1,1,95,w[2],1,1,1,1,1,1,1,1,1,1,96,w[3],1,1,1,1,1,1,1,1,1,1,92,w[4],97,98,88,89,90,91,99,100,101,87,0,w[5],0,0,w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],0,w[14]];function Oi(t){return Pi.map((i,e)=>Ei(i,e,t))}function Ei(t,o,{moduleViews:i,blockViews:e}){var l,_,d,c;const n=o%Ot,s=(o-n)/Ot;if(t===0)return{pos:"euro",page:0,x:n,y:s,index:o,type:y.Blank};if(t===1)return{pos:"euro",page:0,x:n,y:s,index:o,type:y.Button};if(t>1){const a=i.find(u=>u.module.id===t),p=(l=a==null?void 0:a.blockViews)==null?void 0:l[0];return{pos:"euro",page:0,x:n,y:s,index:o,type:y.Button,blockTitle:(_=p==null?void 0:p.name)==null?void 0:_.replaceAll("_"," "),blockView:p,colors:(d=a==null?void 0:a.module)!=null&&d.color?bt[(c=a==null?void 0:a.module)==null?void 0:c.color]:void 0}}else{const a=no(t,i);Ii("connections",a);const p={pos:"euro",page:0,x:n,y:s,index:o,type:t.type,jackView:{spec:t,jack:{id:t.id,euro:!0,active:a.length>0},to:[],from:[]}};return ao(a,p.jackView,e),p}}function Si(t){return t.ioJackViews.map((o,i)=>({pos:"io",page:-1,x:i,y:0,index:i,jackView:o}))}const j=S("zoian:grid-connections-pages");function Fi(t,o,i,e){return t.connections.map(n=>{var _,d,c,a,p,u,h,k;if(!n.fromBlock||!n.toBlock){j("missing blocks",n);return}let s=(_=o.get(n.fromBlock))==null?void 0:_.find(g=>e.includes(g.pos)),l=(d=o.get(n.toBlock))==null?void 0:d.find(g=>e.includes(g.pos));if(!s){const g=(c=n==null?void 0:n.fromBlock)==null?void 0:c.moduleView,b=(a=g==null?void 0:g.blockViews)==null?void 0:a[0];s=(p=o.get(b))==null?void 0:p.find(B=>e.includes(B.pos)),i.has(n==null?void 0:n.fromBlock)?j("alternative to hidden block",n==null?void 0:n.fromBlock,s):j("alternative to UNKNOWN block",n==null?void 0:n.fromBlock,s)}if(!l){const g=(u=n==null?void 0:n.toBlock)==null?void 0:u.moduleView,b=(h=g==null?void 0:g.blockViews)==null?void 0:h[0];l=(k=o.get(b))==null?void 0:k.find(B=>e.includes(B.pos)),i.has(n==null?void 0:n.toBlock)?j("alternative to hidden block",n==null?void 0:n.toBlock,l):j("alternative to UNKNOWN block",n==null?void 0:n.toBlock,l)}if(!s||!l){j("MISSING connection!");return}return[s,l]}).filter(n=>n)}const U=S("zoian:grid-connections-euro");function Vi(t,o,i){const e=n=>n.pos!=="block"?!0:n.page>0;return t.connections.map(n=>{var _,d,c,a,p,u,h,k;if(!n.fromBlock||!n.toBlock){U("missing blocks",n);return}let s=(_=o.get(n.fromBlock))==null?void 0:_.find(e),l=(d=o.get(n.toBlock))==null?void 0:d.find(e);if(!s){const g=(c=n==null?void 0:n.fromBlock)==null?void 0:c.moduleView,b=(a=g==null?void 0:g.blockViews)==null?void 0:a[0];s=(p=o.get(b))==null?void 0:p.find(e),i.has(n==null?void 0:n.fromBlock)?U("alternative to hidden block",n==null?void 0:n.fromBlock,s):U("alternative to UNKNOWN block",n==null?void 0:n.fromBlock,s)}if(!l){const g=(u=n==null?void 0:n.toBlock)==null?void 0:u.moduleView,b=(h=g==null?void 0:g.blockViews)==null?void 0:h[0];l=(k=o.get(b))==null?void 0:k.find(e),i.has(n==null?void 0:n.toBlock)?U("alternative to hidden block",n==null?void 0:n.toBlock,l):U("alternative to UNKNOWN block",n==null?void 0:n.toBlock,l)}if(!s||!l){U("MISSING connection!");return}return[s,l]}).filter(n=>n)}function Zt(t){return t<10?Math.floor(t*1e3)/1e3:t<100?Math.floor(t*100)/100:Math.floor(t*10)/10}function Qt(t){return Math.floor(t*100)/100}function Jt(t){return-100+t/100}function to(t){const o=-100+t/100;return 100*Math.pow(10,o/20)}const qi=S("zoian:grid");function Yi(t){const[o,i]=Li(t),e=Oi(t),n=Si(t),s=new Map,l=new Map;et(s,o),et(l,i),et(s,e),et(s,n),qi("block map",s.size);const _=Fi(t,s,l,["block","io"]),d=t.patch.euro?Vi(t,s,l):[];function c(a){const p=oo(a.blockView,l);if(a.first){const u=a.moduleView.blockViews.map(k=>l.has(k)?k:!1).filter(Boolean),h=[];for(const k of u){const g=k.name.replaceAll("_"," ");h.push(...oo(k,l,g))}return{current:p,hidden:h.length?h:void 0}}return{current:p}}return{view:t,pagesGrid:o,hiddenGrid:i,euroGrid:e,ioGrid:n,connections:_,connectionsEuro:d,blockMap:s,getConnected:c}}function et(t,o){for(const i of o){if(!i)continue;const e=i.blockView||i.jackView;e&&(t.has(e)?t.get(e).push(i):t.set(e,[i]))}}function oo(t,o,i){return[...(t==null?void 0:t.from.map(e=>{var n,s,l,_,d,c;return{name:i,module:(s=(n=e.toBlock.moduleView)==null?void 0:n.spec)==null?void 0:s.name,block:(l=e.toBlock.name)==null?void 0:l.replaceAll("_"," "),from:!0,strength:(_=e.connection)==null?void 0:_.strength,db:Qt(Jt((d=e.connection)==null?void 0:d.strength)),percent:Zt(to((c=e.connection)==null?void 0:c.strength)),hidden:o.has(e.toBlock)}}))??[],...(t==null?void 0:t.to.map(e=>{var n,s,l,_,d,c;return{name:i,module:(s=(n=e.fromBlock.moduleView)==null?void 0:n.spec)==null?void 0:s.name,block:(l=e.fromBlock.name)==null?void 0:l.replaceAll("_"," "),strength:(_=e.connection)==null?void 0:_.strength,db:Qt(Jt((d=e.connection)==null?void 0:d.strength)),percent:Zt(to((c=e.connection)==null?void 0:c.strength)),hidden:o.has(e.fromBlock)}}))??[]].filter(e=>e.module)}const Xi=(t,o)=>{const i=t.__vccOpts||t;for(const[e,n]of o)i[e]=n;return i},Ni=[null,"default","comfortable","compact"],Di=io({density:{type:String,default:"default",validator:t=>Ni.includes(t)}},"density");function $i(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yo();return{densityClasses:ko(()=>`${o}--density-${t.density}`)}}const zi=io({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...bo(),...Di(),...xo(),...Bo()},"VTable"),Zi=Co()({name:"VTable",props:zi(),setup(t,o){let{slots:i,emit:e}=o;const{themeClasses:n}=wo(t),{densityClasses:s}=$i(t);return Ro(()=>pt(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!i.top,"v-table--has-bottom":!!i.bottom,"v-table--hover":t.hover},n.value,s.value,t.class],style:t.style},{default:()=>{var l,_,d;return[(l=i.top)==null?void 0:l.call(i),i.default?pt("div",{class:"v-table__wrapper",style:{height:Ao(t.height)}},[pt("table",null,[i.default()])]):(_=i.wrapper)==null?void 0:_.call(i),(d=i.bottom)==null?void 0:d.call(i)]}})),{}}});export{Lo as C,ci as D,Ot as E,K as G,y as J,Mo as L,P as M,Zi as V,Xi as _,Wi as a,m as b,ji as c,S as d,eo as e,q as f,Io as g,Gi as h,Hi as i,V as j,x as k,Yi as l,Di as m,Ki as n,r as o,Ui as p,Y as q,vt as r,$i as u};
